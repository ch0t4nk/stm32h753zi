<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32H753ZI Motor Control System: src/config/hardware_config.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STM32H753ZI Motor Control System
   &#160;<span id="projectnumber">v1.0.0</span>
   </div>
   <div id="projectbrief">Advanced stepper motor control with X-CUBE-SPN2 and safety systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_7e83d1792d529f4aa7126ac7e0b3b699.html">config</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">hardware_config.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d3/d91/hardware__config_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#ifndef HARDWARE_CONFIG_H</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#define HARDWARE_CONFIG_H</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;stm32h7xx_hal.h&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/* MCU Configuration (SSOT)                                                  */</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a7f0dfbb5b11a8bb738974b820dbcac8f">   25</a></span>&#160;<span class="preprocessor">#define MCU_FAMILY &quot;STM32H7&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aa64ad4c194bff41519086d63aeba0c56">   26</a></span>&#160;<span class="preprocessor">#define MCU_PART_NUMBER &quot;STM32H753ZI&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a5764434edec79d4c1596897cf7076d04">   27</a></span>&#160;<span class="preprocessor">#define MCU_CORE_FREQUENCY_HZ 480000000UL</span></div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3b98905474df6c778bfdb79bdc03f3e6">   28</a></span>&#160;<span class="preprocessor">#define MCU_PACKAGE &quot;LQFP144&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/* STM32H7 Clock Configuration (SSOT) - Validated against official docs */</span></div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a6a3efbd4c499016bf1c3015c1b4fbe5c">   31</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_HSE_HZ 25000000UL  </span><span class="comment">// External crystal on Nucleo-144 (validated)</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a82a190a39158f279180f6048560e7cff">   32</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_PLL_M 5            </span><span class="comment">// HSE prescaler: 25MHz/5 = 5MHz</span></div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ae626dee3af4a8849f915e0866de240e5">   33</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_PLL_N 192          </span><span class="comment">// PLL multiplier: 5MHz*192 = 960MHz  </span></div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a00fa5867183a2bf40e6afd509767b3c4">   34</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_PLL_P 2            </span><span class="comment">// SYSCLK divider: 960MHz/2 = 480MHz</span></div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#af41727541ab190d652190a5e575f90fe">   35</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_AHB_DIV 2          </span><span class="comment">// AHB prescaler: 480MHz/2 = 240MHz</span></div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a064a9e028024bb8e2a5edecf7664c931">   36</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_APB1_DIV 2         </span><span class="comment">// APB1 prescaler: 240MHz/2 = 120MHz</span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a1b2049d9da2ba4cb2360acaf0b4a8433">   37</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_APB2_DIV 2         </span><span class="comment">// APB2 prescaler: 240MHz/2 = 120MHz</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a70556d0a8259f9103dea0c4a234dce75">   38</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_APB3_DIV 2         </span><span class="comment">// APB3 prescaler: 240MHz/2 = 120MHz</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#abf66cf07616b91b373b913939a0be57e">   39</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_APB4_DIV 2         </span><span class="comment">// APB4 prescaler: 240MHz/2 = 120MHz</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">/* X-CUBE-SPN2 + MCSDK Integration Framework (SSOT) */</span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aba8e509e06ab9555e5fab22c45527eb2">   42</a></span>&#160;<span class="preprocessor">#define MOTOR_CONTROL_FRAMEWORK_SPN2    1   </span><span class="comment">// Primary: X-CUBE-SPN2 stepper framework</span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a8fd6f28de7ab32a321cbe961ee86e4b2">   43</a></span>&#160;<span class="preprocessor">#define MOTOR_CONTROL_FRAMEWORK_MCSDK   1   </span><span class="comment">// Secondary: Selective MCSDK enhancement</span></div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a48a04386cc3574787aac56626130cf72">   44</a></span>&#160;<span class="preprocessor">#define MOTOR_CONTROL_HYBRID_MODE       1   </span><span class="comment">// Enable hybrid SPN2+MCSDK integration</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">/* SPI Configuration for L6470 Stepper Drivers (SSOT)                       */</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// TODO: See .github/instructions/stm32h7-spi-l6470.instructions.md for</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">// daisy-chain protocol implementation</span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a463ad6f2f4e61cfd3b45d842141d1cc1">   51</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_INSTANCE SPI2</span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#adae148bbaabe418b9b7d7f244de4144c">   52</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_SCK_PIN GPIO_PIN_13</span></div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a249a3985e101401ae4473e4a0e781bf2">   53</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_SCK_PORT GPIOB</span></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a2177ed55814c6cdc14c8da2ee6f72096">   54</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_SCK_AF GPIO_AF5_SPI2</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aa28e7979ad9da9c3de774038a124c198">   55</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_MISO_PIN GPIO_PIN_14</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ab42834acaec91e4032cb3d35a3cd5454">   56</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_MISO_PORT GPIOB</span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a538f3d2a5d8ffa066b6dbf78935b9890">   57</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_MISO_AF GPIO_AF5_SPI2</span></div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a07bddbc8eddb5ba43b635e1c5adf2d4b">   58</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_MOSI_PIN GPIO_PIN_15</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a64f9768ebb096a750a7274fd9e4a2fdc">   59</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_MOSI_PORT GPIOB</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#acff16f254b83f67c68c689afa332896a">   60</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_MOSI_AF GPIO_AF5_SPI2</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">// Chip Select (CS) for daisy-chained L6470 drivers</span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#af605ba2e0267cd27c15aeaa1912724e5">   63</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_CS_PIN GPIO_PIN_9</span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3720ee5482d6c8a47e91cb67117c12be">   64</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_CS_PORT GPIOA</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// L6470 Control Signals</span></div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a4ee3667ceb4c971f82e3ce830f60902a">   67</a></span>&#160;<span class="preprocessor">#define MOTOR_FLAG_PIN GPIO_PIN_10 </span><span class="comment">// Fault indication from drivers</span></div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#adb758c8a55b3c34c0764419298cf984d">   68</a></span>&#160;<span class="preprocessor">#define MOTOR_FLAG_PORT GPIOA</span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a60ebc1206ec02ea2d28d1213b1c5bdcb">   69</a></span>&#160;<span class="preprocessor">#define MOTOR_BUSY_PIN GPIO_PIN_11 </span><span class="comment">// Busy indication from drivers</span></div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#af4d39d92a04a5f3fd2c4834dfdedbaad">   70</a></span>&#160;<span class="preprocessor">#define MOTOR_BUSY_PORT GPIOA</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">/* I2C Configuration for AS5600 Magnetic Encoders (SSOT)                    */</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">// TODO: See .github/instructions/stm32h7-i2c-as5600.instructions.md for</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">// dual-bus I2C configuration</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">// Primary I2C bus for encoder operations</span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aabed11dcc0e5aa06d41a093ede17e4d1">   79</a></span>&#160;<span class="preprocessor">#define ENCODER_I2C_INSTANCE I2C1</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">// Encoder 1: Motor 1 Position Feedback</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3670200fc416913d28179df1864b694f">   82</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_INSTANCE I2C1</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#adf5c8a831fd3e7ca11db3a449514a1be">   83</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_SCL_PIN GPIO_PIN_6</span></div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#acc09cf3ac08844cd076a9aa5ef919223">   84</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_SCL_PORT GPIOB</span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a1d96b2b1e87a6c1176fb559fc9cbeb97">   85</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_SCL_AF GPIO_AF4_I2C1</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a0652c56ee3829a0917640ad62096e72b">   86</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_SDA_PIN GPIO_PIN_7</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3ed0e561dc8ca80612d24b6880f84d87">   87</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_SDA_PORT GPIOB</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a2ca2dae48a1741e841ba4320ab98c00f">   88</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_SDA_AF GPIO_AF4_I2C1</span></div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aad5c8efa116dc2dac964b42e206440c5">   89</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_ADDRESS 0x36</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">// Encoder 2: Motor 2 Position Feedback</span></div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a31d7f6cf3e271e73b15ccc28f690dd0e">   92</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_INSTANCE I2C2</span></div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ad7247965d0c85114631472ae5a5bb7a5">   93</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_SCL_PIN GPIO_PIN_10</span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a2fea50560aaa87f8cbc54a536710aa98">   94</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_SCL_PORT GPIOB</span></div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a43ae9062dcb446dd5da85ea5086300fe">   95</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_SCL_AF GPIO_AF4_I2C2</span></div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a20fc2161ef4ad87be1c3d64f205f4661">   96</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_SDA_PIN GPIO_PIN_11</span></div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a0ffd79322916f83563e4f749507b7c09">   97</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_SDA_PORT GPIOB</span></div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a65f6ff6e192b8703a323e3d95b2382de">   98</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_SDA_AF GPIO_AF4_I2C2</span></div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a2ef699b5f2d1c82c2fcd66ece4113c82">   99</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_ADDRESS 0x36</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">/* UART Configuration for Virtual COM Port (SSOT)                           */</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">// TODO: See .github/instructions/stm32h7-uart-protocol.instructions.md for</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">// command protocol specification</span></div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a8a613b898e7eba29471760ac57aa2d61">  106</a></span>&#160;<span class="preprocessor">#define UART_INSTANCE USART3</span></div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a6c82a6844388a551e8f06d249598989e">  107</a></span>&#160;<span class="preprocessor">#define UART_TX_PIN GPIO_PIN_8</span></div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a8b2ea1898f38cfe1f20ca4e2e155e2bd">  108</a></span>&#160;<span class="preprocessor">#define UART_TX_PORT GPIOD</span></div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a8d7de5b5a4e3d33dd5b065537928de98">  109</a></span>&#160;<span class="preprocessor">#define UART_TX_AF GPIO_AF7_USART3</span></div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aa37eca6fe61f6938d925975dff27c8fd">  110</a></span>&#160;<span class="preprocessor">#define UART_RX_PIN GPIO_PIN_9</span></div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a151b6aa11aa5aad16c7468122af3b3a3">  111</a></span>&#160;<span class="preprocessor">#define UART_RX_PORT GPIOD</span></div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ae566559ffcf5ac7ebc3e9be173ba1b73">  112</a></span>&#160;<span class="preprocessor">#define UART_RX_AF GPIO_AF7_USART3</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">/* CAN-FD Configuration for MCU-to-MCU Communication (SSOT)                 */</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">// TODO: See .github/instructions/comm-protocols.instructions.md for message ID</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">// allocation and protocol</span></div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a1a61699ef2a59d5daffa88b97f9212a4">  119</a></span>&#160;<span class="preprocessor">#define CAN_INSTANCE FDCAN1</span></div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a21c6f490331e0e009cebfa1ae1952b6f">  120</a></span>&#160;<span class="preprocessor">#define CAN_TX_PIN GPIO_PIN_1</span></div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#accdb14a5d4c81b8d47aeaa24889e1181">  121</a></span>&#160;<span class="preprocessor">#define CAN_TX_PORT GPIOD</span></div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a633069b8603c31e814bd8a2fd3e25da2">  122</a></span>&#160;<span class="preprocessor">#define CAN_TX_AF GPIO_AF9_FDCAN1</span></div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a34114e1d281c37edd83d81b673746c2a">  123</a></span>&#160;<span class="preprocessor">#define CAN_RX_PIN GPIO_PIN_0</span></div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a646883282fd4b3ec5d00919c24b77d0a">  124</a></span>&#160;<span class="preprocessor">#define CAN_RX_PORT GPIOD</span></div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ad44b8cc4e0ca1ef8f204d7a633fe4f60">  125</a></span>&#160;<span class="preprocessor">#define CAN_RX_AF GPIO_AF9_FDCAN1</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">/* Ethernet Configuration for Network Connectivity (SSOT)                   */</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">// TODO: See .github/instructions/comm-protocols.instructions.md for LwIP stack</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">// configuration Note: STM32H753ZI Nucleo has on-board LAN8742 PHY connected via</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">// RMII</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">// RMII Interface Pins</span></div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a551c750ea43900dcbf7278e866dbb524">  135</a></span>&#160;<span class="preprocessor">#define ETH_RMII_REF_CLK_PIN GPIO_PIN_1</span></div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a168652e4013317928f5b648157b2d2c1">  136</a></span>&#160;<span class="preprocessor">#define ETH_RMII_REF_CLK_PORT GPIOA</span></div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3b78e1f4656017296758ad3e236b0dd5">  137</a></span>&#160;<span class="preprocessor">#define ETH_RMII_REF_CLK_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#abdd0eca15343c2178fcaac080b055809">  138</a></span>&#160;<span class="preprocessor">#define ETH_RMII_MDIO_PIN GPIO_PIN_2</span></div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a5a462b32c9eb64342de5d88b0b6e86bb">  139</a></span>&#160;<span class="preprocessor">#define ETH_RMII_MDIO_PORT GPIOA</span></div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ac45cf2194016bba02378444397c42e4e">  140</a></span>&#160;<span class="preprocessor">#define ETH_RMII_MDIO_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3ce2c06d9703a047d7958f4493ca6de8">  141</a></span>&#160;<span class="preprocessor">#define ETH_RMII_MDC_PIN GPIO_PIN_1</span></div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aa414f527349ca27c97de5479177061d9">  142</a></span>&#160;<span class="preprocessor">#define ETH_RMII_MDC_PORT GPIOC</span></div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a44540ec289d3ed8d63a6ceaf17916b88">  143</a></span>&#160;<span class="preprocessor">#define ETH_RMII_MDC_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a79b80d19c204082a803e14fbf474806d">  145</a></span>&#160;<span class="preprocessor">#define ETH_RMII_CRS_DV_PIN GPIO_PIN_7</span></div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ac3312a4be8f539d00605af2d20a924d2">  146</a></span>&#160;<span class="preprocessor">#define ETH_RMII_CRS_DV_PORT GPIOA</span></div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a9f0fef3c7206e93ef951399953d313ef">  147</a></span>&#160;<span class="preprocessor">#define ETH_RMII_CRS_DV_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aea4fdf9d1d2bac4b3c8c7003097d25ff">  148</a></span>&#160;<span class="preprocessor">#define ETH_RMII_RXD0_PIN GPIO_PIN_4</span></div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aa1627409cecc3a18b6927809119e2cec">  149</a></span>&#160;<span class="preprocessor">#define ETH_RMII_RXD0_PORT GPIOC</span></div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a6bec4ef42c751199ddd8b604fcec2b06">  150</a></span>&#160;<span class="preprocessor">#define ETH_RMII_RXD0_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a9fe29b26498425a83ea40f880c594260">  151</a></span>&#160;<span class="preprocessor">#define ETH_RMII_RXD1_PIN GPIO_PIN_5</span></div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a15f96ecb52587ad842d2b32a5bb770fc">  152</a></span>&#160;<span class="preprocessor">#define ETH_RMII_RXD1_PORT GPIOC</span></div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a9e6392919305d40f316e01f82b61749c">  153</a></span>&#160;<span class="preprocessor">#define ETH_RMII_RXD1_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a8c1b950b4700ef060eee8c3aeaf8a2a4">  155</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TX_EN_PIN GPIO_PIN_11</span></div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#acb74a7b51bf2be86df7a83e312b6071d">  156</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TX_EN_PORT GPIOG</span></div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ab324842882ca4f89894424dce6dd6d82">  157</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TX_EN_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a4786377b043c41c3bb341ff4a723e392">  158</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TXD0_PIN GPIO_PIN_13</span></div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a9c37568afe581d624eec6077d58bc0f4">  159</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TXD0_PORT GPIOG</span></div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a430095bd893f4b3f4bd5d35205b9334b">  160</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TXD0_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#add12908e6540529652c1cb7c5f087e2b">  161</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TXD1_PIN GPIO_PIN_12</span></div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a0dd9811a91384b15b2462c15abd0f763">  162</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TXD1_PORT GPIOB</span></div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#adcdac4a8b5d44f5d2872c2394ea70200">  163</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TXD1_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">// PHY Configuration</span></div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aaa641f838e8052765ce998149047fa2d">  166</a></span>&#160;<span class="preprocessor">#define ETH_PHY_ADDRESS 0x00         </span><span class="comment">// LAN8742 PHY address</span></div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a5d78aa8355e3cbf2778c332de00457d1">  167</a></span>&#160;<span class="preprocessor">#define ETH_PHY_RESET_PIN GPIO_PIN_3 </span><span class="comment">// Optional reset pin</span></div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a4b48212e11867f58467ae4a99d8c077e">  168</a></span>&#160;<span class="preprocessor">#define ETH_PHY_RESET_PORT GPIOG</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">/* GPIO Configuration for Status LEDs and User Interface (SSOT)             */</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">// TODO: See .instructions/user-interface.md for LED indication patterns</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">// Nucleo-144 on-board LEDs</span></div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a0539be032702009fb24beec89c6fa0c0">  176</a></span>&#160;<span class="preprocessor">#define LED_GREEN_PIN GPIO_PIN_0 </span><span class="comment">// LD1 - System status</span></div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3ed8b1ac183679013d04fa3ebe0e44e5">  177</a></span>&#160;<span class="preprocessor">#define LED_GREEN_PORT GPIOB</span></div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3efbeab3ef9de8a67a070364621e01e6">  178</a></span>&#160;<span class="preprocessor">#define LED_YELLOW_PIN GPIO_PIN_1 </span><span class="comment">// LD2 - CAN activity</span></div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ae52dce245c53b294fb89456e42f3508d">  179</a></span>&#160;<span class="preprocessor">#define LED_YELLOW_PORT GPIOE</span></div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ab9824ab080c30006c1baaa0dd7e863c5">  180</a></span>&#160;<span class="preprocessor">#define LED_RED_PIN GPIO_PIN_14 </span><span class="comment">// LD3 - Error/fault</span></div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a7959a54f2383757d0007ee4b96071186">  181</a></span>&#160;<span class="preprocessor">#define LED_RED_PORT GPIOB</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">// User button</span></div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a34df6915e3013d6a0c74131d3946b659">  184</a></span>&#160;<span class="preprocessor">#define USER_BUTTON_PIN GPIO_PIN_13 </span><span class="comment">// B1 - Emergency stop</span></div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a122d98da2c5c2666cb014b44cf513c4f">  185</a></span>&#160;<span class="preprocessor">#define USER_BUTTON_PORT GPIOC</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">/* Timer Configuration for Control Loop and PWM (SSOT)                      */</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">// TODO: See .instructions/control-timing.md for real-time control requirements</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">// Control loop timer (1kHz control frequency)</span></div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a852bf6b5401b95692ae8dbb6f72f2bb7">  193</a></span>&#160;<span class="preprocessor">#define CONTROL_TIMER_INSTANCE TIM2</span></div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ad9dc6c3017838162563ebe6bfd803d54">  194</a></span>&#160;<span class="preprocessor">#define CONTROL_TIMER_FREQ_HZ 1000</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">// General purpose timer for timeouts and delays</span></div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3e501d1ba84a3bc5dd3880fd375f527a">  197</a></span>&#160;<span class="preprocessor">#define GENERAL_TIMER_INSTANCE TIM3</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">/* DMA Configuration for High-Performance Transfers (SSOT)                  */</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">// TODO: See .github/instructions/hardware-pins.instructions.md for efficient</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">// peripheral data transfer</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">// SPI DMA channels for L6470 communication</span></div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a4346b0474f1b22ad7a5154c40ed4a086">  206</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_DMA_TX_STREAM DMA1_Stream4</span></div>
<div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a1ff8934664f1bfbaa3675ed25fbb64af">  207</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_DMA_RX_STREAM DMA1_Stream3</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">// UART DMA for command processing</span></div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a092936e3bc371898f6fd0690486d3c60">  210</a></span>&#160;<span class="preprocessor">#define UART_DMA_TX_STREAM DMA1_Stream2</span></div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a347f30eb8dd2bb969a3095410010eb8e">  211</a></span>&#160;<span class="preprocessor">#define UART_DMA_RX_STREAM DMA1_Stream1</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">/* Clock Configuration Parameters (SSOT)                                     */</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">// TODO: See .github/instructions/hardware-pins.instructions.md for system clock</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">// tree setup</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">// Protect against redefinition warnings - only define if not already defined</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="preprocessor">#ifndef HSE_VALUE</span></div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aeafcff4f57440c60e64812dddd13e7cb">  221</a></span>&#160;<span class="preprocessor">#define HSE_VALUE 8000000UL           </span><span class="comment">// External crystal frequency (8MHz on Nucleo-144)</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="preprocessor">#ifndef LSE_VALUE</span></div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a7bbb9d19e5189a6ccd0fb6fa6177d20d">  225</a></span>&#160;<span class="preprocessor">#define LSE_VALUE 32768UL             </span><span class="comment">// LSE crystal for RTC</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="preprocessor">#ifndef VDD_VALUE</span></div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aae550dad9f96d52cfce5e539adadbbb4">  229</a></span>&#160;<span class="preprocessor">#define VDD_VALUE 3300UL              </span><span class="comment">// VDD voltage in millivolts</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">// Power supply monitoring constants</span></div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a26e30f57d389d829623591d7500f4bfc">  233</a></span>&#160;<span class="preprocessor">#define SUPPLY_VOLTAGE_MIN_MV 10000   </span><span class="comment">// Minimum supply voltage (10V)</span></div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a9d0d9e883b5385cd15980c10400f479c">  234</a></span>&#160;<span class="preprocessor">#define SUPPLY_VOLTAGE_MAX_MV 15000   </span><span class="comment">// Maximum supply voltage (15V)</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">// Temperature monitoring constants</span></div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ac0decd2e48a7fc46783dfa9d064dd6e1">  237</a></span>&#160;<span class="preprocessor">#define SYSTEM_MAX_TEMP_C 85          </span><span class="comment">// Maximum system temperature</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">// Position error constants</span></div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a2f2edf5b882e1d4a24e568957fd86246">  240</a></span>&#160;<span class="preprocessor">#define MAX_POSITION_ERROR_STEPS 100  </span><span class="comment">// Maximum position error in steps</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ab8152d71891538c19c0707f252ac423e">  242</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_FREQ 480000000UL </span><span class="comment">// System clock frequency</span></div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ac83c472139a2d1f6b46278acc8fc86a2">  243</a></span>&#160;<span class="preprocessor">#define AHB_CLOCK_FREQ 240000000UL    </span><span class="comment">// AHB bus frequency</span></div>
<div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a599290d7ec539bf7e9cfda164ad425ed">  244</a></span>&#160;<span class="preprocessor">#define APB1_CLOCK_FREQ 120000000UL   </span><span class="comment">// APB1 bus frequency</span></div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a75caa70a98b1af5902ed43c67df007d9">  245</a></span>&#160;<span class="preprocessor">#define APB2_CLOCK_FREQ 120000000UL   </span><span class="comment">// APB2 bus frequency</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">/* Memory Map Configuration (SSOT)                                           */</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">/* ========================================================================== */</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">// TODO: See .github/instructions/hardware-pins.instructions.md for STM32H7</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">// memory organization</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">// STM32H753ZI Memory Layout</span></div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a0571de796f539e5779da6a9203190645">  254</a></span>&#160;<span class="preprocessor">#define FLASH_BASE_ADDR 0x08000000UL</span></div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a420e2a051a85a861f51fb093fa3efd14">  255</a></span>&#160;<span class="preprocessor">#define FLASH_SIZE_BYTES (2048 * 1024) </span><span class="comment">// 2MB Flash</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#abe5be0f6549d1fef128580c7216d6927">  257</a></span>&#160;<span class="preprocessor">#define DTCM_RAM_BASE_ADDR 0x20000000UL </span><span class="comment">// 128KB DTCM</span></div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#af32961690d9a387513ec7290c9dbb256">  258</a></span>&#160;<span class="preprocessor">#define DTCM_RAM_SIZE_BYTES (128 * 1024)</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ac4252994ec0ad48e43c36d73c9feb900">  260</a></span>&#160;<span class="preprocessor">#define AXI_SRAM_BASE_ADDR 0x24000000UL </span><span class="comment">// 512KB AXI SRAM</span></div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a61c64a31b98ed6853bb4f49ed82d6d2e">  261</a></span>&#160;<span class="preprocessor">#define AXI_SRAM_SIZE_BYTES (512 * 1024)</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aa34f870516ccaf7129b13c8a5b2fabad">  263</a></span>&#160;<span class="preprocessor">#define SRAM1_BASE_ADDR 0x30000000UL </span><span class="comment">// 128KB SRAM1</span></div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a76c6028da5fb70d9268a2e9334604208">  264</a></span>&#160;<span class="preprocessor">#define SRAM1_SIZE_BYTES (128 * 1024)</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a887d911cf651e06e35dd9bf876d09115">  266</a></span>&#160;<span class="preprocessor">#define SRAM2_BASE_ADDR 0x30020000UL </span><span class="comment">// 128KB SRAM2</span></div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a30ba221a39a9dedebe5ce64a1b5adca5">  267</a></span>&#160;<span class="preprocessor">#define SRAM2_SIZE_BYTES (128 * 1024)</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a076d9ffdcdc9b60f822e21ba78dbd562">  269</a></span>&#160;<span class="preprocessor">#define SRAM3_BASE_ADDR 0x30040000UL </span><span class="comment">// 32KB SRAM3</span></div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#af797df47489f2dcf8aa364e31a77ac95">  270</a></span>&#160;<span class="preprocessor">#define SRAM3_SIZE_BYTES (32 * 1024)</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a1e719b0ff8a0673ec01dce22a1c2b65e">  272</a></span>&#160;<span class="preprocessor">#define SRAM4_BASE_ADDR 0x38000000UL </span><span class="comment">// 64KB SRAM4</span></div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a98628bf247aa46956fa0258c58d8fe4e">  273</a></span>&#160;<span class="preprocessor">#define SRAM4_SIZE_BYTES (64 * 1024)</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">// Ethernet DMA buffers placement (must be in D2 domain)</span></div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#abf943e31885a12c25ef54842e176a8e7">  276</a></span>&#160;<span class="preprocessor">#define ETH_DMA_BUFFER_BASE SRAM2_BASE_ADDR</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* HARDWARE_CONFIG_H */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Aug 5 2025 13:09:32 for STM32H753ZI Motor Control System by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
