<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32H753ZI Motor Control System: src/config/hardware_config.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STM32H753ZI Motor Control System
   &#160;<span id="projectnumber">v1.0.0</span>
   </div>
   <div id="projectbrief">Advanced stepper motor control with X-CUBE-SPN2 and safety systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_7e83d1792d529f4aa7126ac7e0b3b699.html">config</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">hardware_config.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d3/d91/hardware__config_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#ifndef HARDWARE_CONFIG_H</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#define HARDWARE_CONFIG_H</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#ifdef FIRMWARE_BUILD</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// Firmware build: Include STM32 HAL headers</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d36/stm32h7xx__hal_8h.html">stm32h7xx_hal.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// Host test build: Include HAL abstraction headers for enums</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/dee/hal__abstraction_8h.html">hal_abstraction/hal_abstraction.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/* MCU Configuration (SSOT)                                                  */</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a7f0dfbb5b11a8bb738974b820dbcac8f">   33</a></span>&#160;<span class="preprocessor">#define MCU_FAMILY &quot;STM32H7&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aa64ad4c194bff41519086d63aeba0c56">   34</a></span>&#160;<span class="preprocessor">#define MCU_PART_NUMBER &quot;STM32H753ZI&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a5764434edec79d4c1596897cf7076d04">   35</a></span>&#160;<span class="preprocessor">#define MCU_CORE_FREQUENCY_HZ 480000000UL</span></div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3b98905474df6c778bfdb79bdc03f3e6">   36</a></span>&#160;<span class="preprocessor">#define MCU_PACKAGE &quot;LQFP144&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">/* STM32H7 Clock Configuration (SSOT) - Validated against official docs */</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a6a3efbd4c499016bf1c3015c1b4fbe5c">   39</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_HSE_HZ                                                   \</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">    25000000UL                  </span><span class="comment">// External crystal on Nucleo-144 (validated)</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a82a190a39158f279180f6048560e7cff">   41</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_PLL_M 5    </span><span class="comment">// HSE prescaler: 25MHz/5 = 5MHz</span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ae626dee3af4a8849f915e0866de240e5">   42</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_PLL_N 192  </span><span class="comment">// PLL multiplier: 5MHz*192 = 960MHz</span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a00fa5867183a2bf40e6afd509767b3c4">   43</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_PLL_P 2    </span><span class="comment">// SYSCLK divider: 960MHz/2 = 480MHz</span></div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#af41727541ab190d652190a5e575f90fe">   44</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_AHB_DIV 2  </span><span class="comment">// AHB prescaler: 480MHz/2 = 240MHz</span></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a064a9e028024bb8e2a5edecf7664c931">   45</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_APB1_DIV 2 </span><span class="comment">// APB1 prescaler: 240MHz/2 = 120MHz</span></div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a1b2049d9da2ba4cb2360acaf0b4a8433">   46</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_APB2_DIV 2 </span><span class="comment">// APB2 prescaler: 240MHz/2 = 120MHz</span></div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a70556d0a8259f9103dea0c4a234dce75">   47</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_APB3_DIV 2 </span><span class="comment">// APB3 prescaler: 240MHz/2 = 120MHz</span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#abf66cf07616b91b373b913939a0be57e">   48</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_APB4_DIV 2 </span><span class="comment">// APB4 prescaler: 240MHz/2 = 120MHz</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">/* X-CUBE-SPN2 + MCSDK Integration Framework (SSOT) */</span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aba8e509e06ab9555e5fab22c45527eb2">   51</a></span>&#160;<span class="preprocessor">#define MOTOR_CONTROL_FRAMEWORK_SPN2                                          \</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">    1 </span><span class="comment">// Primary: X-CUBE-SPN2 stepper framework</span></div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a8fd6f28de7ab32a321cbe961ee86e4b2">   53</a></span>&#160;<span class="preprocessor">#define MOTOR_CONTROL_FRAMEWORK_MCSDK                                         \</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">    1                               </span><span class="comment">// Secondary: Selective MCSDK enhancement</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a48a04386cc3574787aac56626130cf72">   55</a></span>&#160;<span class="preprocessor">#define MOTOR_CONTROL_HYBRID_MODE 1 </span><span class="comment">// Enable hybrid SPN2+MCSDK integration</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">/* SPI Configuration for L6470 Stepper Drivers (SSOT)                       */</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">// TODO: See .github/instructions/stm32h7-spi-l6470.instructions.md for</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">// daisy-chain protocol implementation</span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a463ad6f2f4e61cfd3b45d842141d1cc1">   64</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_INSTANCE SPI2</span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#adae148bbaabe418b9b7d7f244de4144c">   65</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_SCK_PIN GPIO_PIN_13</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a249a3985e101401ae4473e4a0e781bf2">   66</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_SCK_PORT GPIOB</span></div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a2177ed55814c6cdc14c8da2ee6f72096">   67</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_SCK_AF GPIO_AF5_SPI2</span></div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aa28e7979ad9da9c3de774038a124c198">   68</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_MISO_PIN GPIO_PIN_14</span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ab42834acaec91e4032cb3d35a3cd5454">   69</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_MISO_PORT GPIOB</span></div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a538f3d2a5d8ffa066b6dbf78935b9890">   70</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_MISO_AF GPIO_AF5_SPI2</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a07bddbc8eddb5ba43b635e1c5adf2d4b">   71</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_MOSI_PIN GPIO_PIN_15</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a64f9768ebb096a750a7274fd9e4a2fdc">   72</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_MOSI_PORT GPIOB</span></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#acff16f254b83f67c68c689afa332896a">   73</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_MOSI_AF GPIO_AF5_SPI2</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">// Chip Select (CS) for daisy-chained L6470 drivers</span></div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#af605ba2e0267cd27c15aeaa1912724e5">   76</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_CS_PIN GPIO_PIN_9</span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3720ee5482d6c8a47e91cb67117c12be">   77</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_CS_PORT GPIOA</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">// L6470 Control Signals</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a4ee3667ceb4c971f82e3ce830f60902a">   80</a></span>&#160;<span class="preprocessor">#define MOTOR_FLAG_PIN GPIO_PIN_10 </span><span class="comment">// Fault indication from drivers</span></div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#adb758c8a55b3c34c0764419298cf984d">   81</a></span>&#160;<span class="preprocessor">#define MOTOR_FLAG_PORT GPIOA</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a60ebc1206ec02ea2d28d1213b1c5bdcb">   82</a></span>&#160;<span class="preprocessor">#define MOTOR_BUSY_PIN GPIO_PIN_11 </span><span class="comment">// Busy indication from drivers</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#af4d39d92a04a5f3fd2c4834dfdedbaad">   83</a></span>&#160;<span class="preprocessor">#define MOTOR_BUSY_PORT GPIOA</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">/* I2C Configuration for AS5600 Magnetic Encoders (SSOT)                    */</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">// TODO: See .github/instructions/stm32h7-i2c-as5600.instructions.md for</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">// dual-bus I2C configuration</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">// Primary I2C bus for encoder operations</span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aabed11dcc0e5aa06d41a093ede17e4d1">   94</a></span>&#160;<span class="preprocessor">#define ENCODER_I2C_INSTANCE I2C1</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">// Encoder 1: Motor 1 Position Feedback</span></div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3670200fc416913d28179df1864b694f">   97</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_INSTANCE I2C1</span></div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#adf5c8a831fd3e7ca11db3a449514a1be">   98</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_SCL_PIN GPIO_PIN_6</span></div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#acc09cf3ac08844cd076a9aa5ef919223">   99</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_SCL_PORT GPIOB</span></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a1d96b2b1e87a6c1176fb559fc9cbeb97">  100</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_SCL_AF GPIO_AF4_I2C1</span></div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a0652c56ee3829a0917640ad62096e72b">  101</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_SDA_PIN GPIO_PIN_7</span></div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3ed0e561dc8ca80612d24b6880f84d87">  102</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_SDA_PORT GPIOB</span></div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a2ca2dae48a1741e841ba4320ab98c00f">  103</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_SDA_AF GPIO_AF4_I2C1</span></div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aad5c8efa116dc2dac964b42e206440c5">  104</a></span>&#160;<span class="preprocessor">#define ENCODER1_I2C_ADDRESS 0x36</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">// Encoder 2: Motor 2 Position Feedback</span></div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a31d7f6cf3e271e73b15ccc28f690dd0e">  107</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_INSTANCE I2C2</span></div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ad7247965d0c85114631472ae5a5bb7a5">  108</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_SCL_PIN GPIO_PIN_10</span></div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a2fea50560aaa87f8cbc54a536710aa98">  109</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_SCL_PORT GPIOB</span></div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a43ae9062dcb446dd5da85ea5086300fe">  110</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_SCL_AF GPIO_AF4_I2C2</span></div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a20fc2161ef4ad87be1c3d64f205f4661">  111</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_SDA_PIN GPIO_PIN_11</span></div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a0ffd79322916f83563e4f749507b7c09">  112</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_SDA_PORT GPIOB</span></div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a65f6ff6e192b8703a323e3d95b2382de">  113</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_SDA_AF GPIO_AF4_I2C2</span></div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a2ef699b5f2d1c82c2fcd66ece4113c82">  114</a></span>&#160;<span class="preprocessor">#define ENCODER2_I2C_ADDRESS 0x36</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">/* UART Configuration for Virtual COM Port (SSOT)                           */</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">// TODO: See .github/instructions/stm32h7-uart-protocol.instructions.md for</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">// command protocol specification</span></div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a8a613b898e7eba29471760ac57aa2d61">  123</a></span>&#160;<span class="preprocessor">#define UART_INSTANCE USART3</span></div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a6c82a6844388a551e8f06d249598989e">  124</a></span>&#160;<span class="preprocessor">#define UART_TX_PIN GPIO_PIN_8</span></div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a8b2ea1898f38cfe1f20ca4e2e155e2bd">  125</a></span>&#160;<span class="preprocessor">#define UART_TX_PORT GPIOD</span></div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a8d7de5b5a4e3d33dd5b065537928de98">  126</a></span>&#160;<span class="preprocessor">#define UART_TX_AF GPIO_AF7_USART3</span></div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aa37eca6fe61f6938d925975dff27c8fd">  127</a></span>&#160;<span class="preprocessor">#define UART_RX_PIN GPIO_PIN_9</span></div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a151b6aa11aa5aad16c7468122af3b3a3">  128</a></span>&#160;<span class="preprocessor">#define UART_RX_PORT GPIOD</span></div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ae566559ffcf5ac7ebc3e9be173ba1b73">  129</a></span>&#160;<span class="preprocessor">#define UART_RX_AF GPIO_AF7_USART3</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">/* CAN-FD Configuration for MCU-to-MCU Communication (SSOT)                 */</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">// TODO: See .github/instructions/comm-protocols.instructions.md for message ID</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">// allocation and protocol</span></div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a1a61699ef2a59d5daffa88b97f9212a4">  138</a></span>&#160;<span class="preprocessor">#define CAN_INSTANCE FDCAN1</span></div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a21c6f490331e0e009cebfa1ae1952b6f">  139</a></span>&#160;<span class="preprocessor">#define CAN_TX_PIN GPIO_PIN_1</span></div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#accdb14a5d4c81b8d47aeaa24889e1181">  140</a></span>&#160;<span class="preprocessor">#define CAN_TX_PORT GPIOD</span></div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a633069b8603c31e814bd8a2fd3e25da2">  141</a></span>&#160;<span class="preprocessor">#define CAN_TX_AF GPIO_AF9_FDCAN1</span></div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a34114e1d281c37edd83d81b673746c2a">  142</a></span>&#160;<span class="preprocessor">#define CAN_RX_PIN GPIO_PIN_0</span></div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a646883282fd4b3ec5d00919c24b77d0a">  143</a></span>&#160;<span class="preprocessor">#define CAN_RX_PORT GPIOD</span></div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ad44b8cc4e0ca1ef8f204d7a633fe4f60">  144</a></span>&#160;<span class="preprocessor">#define CAN_RX_AF GPIO_AF9_FDCAN1</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">/* Ethernet Configuration for Network Connectivity (SSOT)                   */</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">// TODO: See .github/instructions/comm-protocols.instructions.md for LwIP stack</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">// configuration Note: STM32H753ZI Nucleo has on-board LAN8742 PHY connected</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">// via RMII</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">// RMII Interface Pins</span></div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a551c750ea43900dcbf7278e866dbb524">  156</a></span>&#160;<span class="preprocessor">#define ETH_RMII_REF_CLK_PIN GPIO_PIN_1</span></div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a168652e4013317928f5b648157b2d2c1">  157</a></span>&#160;<span class="preprocessor">#define ETH_RMII_REF_CLK_PORT GPIOA</span></div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3b78e1f4656017296758ad3e236b0dd5">  158</a></span>&#160;<span class="preprocessor">#define ETH_RMII_REF_CLK_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#abdd0eca15343c2178fcaac080b055809">  159</a></span>&#160;<span class="preprocessor">#define ETH_RMII_MDIO_PIN GPIO_PIN_2</span></div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a5a462b32c9eb64342de5d88b0b6e86bb">  160</a></span>&#160;<span class="preprocessor">#define ETH_RMII_MDIO_PORT GPIOA</span></div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ac45cf2194016bba02378444397c42e4e">  161</a></span>&#160;<span class="preprocessor">#define ETH_RMII_MDIO_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3ce2c06d9703a047d7958f4493ca6de8">  162</a></span>&#160;<span class="preprocessor">#define ETH_RMII_MDC_PIN GPIO_PIN_1</span></div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aa414f527349ca27c97de5479177061d9">  163</a></span>&#160;<span class="preprocessor">#define ETH_RMII_MDC_PORT GPIOC</span></div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a44540ec289d3ed8d63a6ceaf17916b88">  164</a></span>&#160;<span class="preprocessor">#define ETH_RMII_MDC_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a79b80d19c204082a803e14fbf474806d">  166</a></span>&#160;<span class="preprocessor">#define ETH_RMII_CRS_DV_PIN GPIO_PIN_7</span></div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ac3312a4be8f539d00605af2d20a924d2">  167</a></span>&#160;<span class="preprocessor">#define ETH_RMII_CRS_DV_PORT GPIOA</span></div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a9f0fef3c7206e93ef951399953d313ef">  168</a></span>&#160;<span class="preprocessor">#define ETH_RMII_CRS_DV_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aea4fdf9d1d2bac4b3c8c7003097d25ff">  169</a></span>&#160;<span class="preprocessor">#define ETH_RMII_RXD0_PIN GPIO_PIN_4</span></div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aa1627409cecc3a18b6927809119e2cec">  170</a></span>&#160;<span class="preprocessor">#define ETH_RMII_RXD0_PORT GPIOC</span></div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a6bec4ef42c751199ddd8b604fcec2b06">  171</a></span>&#160;<span class="preprocessor">#define ETH_RMII_RXD0_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a9fe29b26498425a83ea40f880c594260">  172</a></span>&#160;<span class="preprocessor">#define ETH_RMII_RXD1_PIN GPIO_PIN_5</span></div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a15f96ecb52587ad842d2b32a5bb770fc">  173</a></span>&#160;<span class="preprocessor">#define ETH_RMII_RXD1_PORT GPIOC</span></div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a9e6392919305d40f316e01f82b61749c">  174</a></span>&#160;<span class="preprocessor">#define ETH_RMII_RXD1_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a8c1b950b4700ef060eee8c3aeaf8a2a4">  176</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TX_EN_PIN GPIO_PIN_11</span></div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#acb74a7b51bf2be86df7a83e312b6071d">  177</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TX_EN_PORT GPIOG</span></div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ab324842882ca4f89894424dce6dd6d82">  178</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TX_EN_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a4786377b043c41c3bb341ff4a723e392">  179</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TXD0_PIN GPIO_PIN_13</span></div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a9c37568afe581d624eec6077d58bc0f4">  180</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TXD0_PORT GPIOG</span></div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a430095bd893f4b3f4bd5d35205b9334b">  181</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TXD0_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#add12908e6540529652c1cb7c5f087e2b">  182</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TXD1_PIN GPIO_PIN_12</span></div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a0dd9811a91384b15b2462c15abd0f763">  183</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TXD1_PORT GPIOB</span></div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#adcdac4a8b5d44f5d2872c2394ea70200">  184</a></span>&#160;<span class="preprocessor">#define ETH_RMII_TXD1_AF GPIO_AF11_ETH</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">// PHY Configuration</span></div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aaa641f838e8052765ce998149047fa2d">  187</a></span>&#160;<span class="preprocessor">#define ETH_PHY_ADDRESS 0x00         </span><span class="comment">// LAN8742 PHY address</span></div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a5d78aa8355e3cbf2778c332de00457d1">  188</a></span>&#160;<span class="preprocessor">#define ETH_PHY_RESET_PIN GPIO_PIN_3 </span><span class="comment">// Optional reset pin</span></div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a4b48212e11867f58467ae4a99d8c077e">  189</a></span>&#160;<span class="preprocessor">#define ETH_PHY_RESET_PORT GPIOG</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">/* GPIO Configuration for Status LEDs and User Interface (SSOT)             */</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">// TODO: See .instructions/user-interface.md for LED indication patterns</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">/* GPIO Pin Configuration (SSOT) - Pin Number Based Architecture             */</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">// STM32H753ZI Nucleo-144 Board Pin Assignments</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">// See UM1974 STM32 Nucleo-144 boards user manual for reference</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">/* ===== SSOT PIN NUMBER DEFINITIONS =====</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"> * Define only the pin NUMBER (0-15) and PORT enum - everything else computed</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment"> * Pin remapping requires changes ONLY here - no duplicated definitions!</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">// Status LEDs (Nucleo-144 onboard LEDs) - SSOT Base Definitions</span></div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3b491d63685e7b3aa9f54bb700c2b76c">  213</a></span>&#160;<span class="preprocessor">#define LED_GREEN_PIN_NUM 0 </span><span class="comment">// LD1 - System status (PB0)</span></div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a03e0c6bdf1e688e9c77e250f954c320f">  214</a></span>&#160;<span class="preprocessor">#define LED_GREEN_PORT_ENUM HAL_GPIO_PORT_B</span></div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aafe7dd2330c0706572abe0781325e857">  215</a></span>&#160;<span class="preprocessor">#define LED_YELLOW_PIN_NUM 1 </span><span class="comment">// LD2 - CAN activity (PE1)</span></div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a6a8e6f220248d808f1240b8b693fe0f1">  216</a></span>&#160;<span class="preprocessor">#define LED_YELLOW_PORT_ENUM HAL_GPIO_PORT_E</span></div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a000d55417d3b202fd989261135b6b664">  217</a></span>&#160;<span class="preprocessor">#define LED_RED_PIN_NUM 14 </span><span class="comment">// LD3 - Error/fault (PB14)</span></div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a6113454e33e396c6133ca91a469d51fa">  218</a></span>&#160;<span class="preprocessor">#define LED_RED_PORT_ENUM HAL_GPIO_PORT_B</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">// User Button - SSOT Base Definition</span></div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a639d3104ca46190d04f5e76ea18f64cf">  221</a></span>&#160;<span class="preprocessor">#define USER_BUTTON_PIN_NUM 13 </span><span class="comment">// B1 - Emergency stop (PC13)</span></div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a5c4c251ed31acbfa25ff764c8bb784f4">  222</a></span>&#160;<span class="preprocessor">#define USER_BUTTON_PORT_ENUM HAL_GPIO_PORT_C</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">// Safety Relays - SSOT Base Definitions</span></div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a493b4771a9f4d64db911b7b0f1dae697">  225</a></span>&#160;<span class="preprocessor">#define SAFETY_RELAY1_PIN_NUM 4 </span><span class="comment">// Safety relay 1 control (PC4)</span></div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a31a939453e59929478fcc07df8486856">  226</a></span>&#160;<span class="preprocessor">#define SAFETY_RELAY1_PORT_ENUM HAL_GPIO_PORT_C</span></div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aff6ce492b11629ad0425c75dabfc6d9f">  227</a></span>&#160;<span class="preprocessor">#define SAFETY_RELAY2_PIN_NUM 5 </span><span class="comment">// Safety relay 2 control (PC5)</span></div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a13a6ca2b68bff34755523f4e1468521b">  228</a></span>&#160;<span class="preprocessor">#define SAFETY_RELAY2_PORT_ENUM HAL_GPIO_PORT_C</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">/* ===== COMPUTED DEFINITIONS - Auto-generated from SSOT =====</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment"> * These are computed from the base pin numbers above</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"> * NEVER modify these directly - change the _PIN_NUM definitions above!</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">// Macro to convert pin number to bit mask</span></div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a09806844291029591b51459ebb6a6517">  236</a></span>&#160;<span class="preprocessor">#define PIN_TO_BITMASK(pin_num) (1U &lt;&lt; (pin_num))</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">// Status LED computed definitions</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="preprocessor">#ifdef FIRMWARE_BUILD</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">// STM32 HAL constants for firmware</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="preprocessor">#define LED_GREEN_PIN (PIN_TO_BITMASK(LED_GREEN_PIN_NUM))   </span><span class="comment">// GPIO_PIN_0</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">#define LED_GREEN_PORT GPIOB                                </span><span class="comment">// STM32 HAL port</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">#define LED_YELLOW_PIN (PIN_TO_BITMASK(LED_YELLOW_PIN_NUM)) </span><span class="comment">// GPIO_PIN_1</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor">#define LED_YELLOW_PORT GPIOE                               </span><span class="comment">// STM32 HAL port</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor">#define LED_RED_PIN (PIN_TO_BITMASK(LED_RED_PIN_NUM))       </span><span class="comment">// GPIO_PIN_14</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor">#define LED_RED_PORT GPIOB                                  </span><span class="comment">// STM32 HAL port</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">// HAL abstraction for host tests</span></div>
<div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a0539be032702009fb24beec89c6fa0c0">  249</a></span>&#160;<span class="preprocessor">#define LED_GREEN_PIN (PIN_TO_BITMASK(LED_GREEN_PIN_NUM))   </span><span class="comment">// Bit mask</span></div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3ed8b1ac183679013d04fa3ebe0e44e5">  250</a></span>&#160;<span class="preprocessor">#define LED_GREEN_PORT LED_GREEN_PORT_ENUM                  </span><span class="comment">// HAL enum</span></div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3efbeab3ef9de8a67a070364621e01e6">  251</a></span>&#160;<span class="preprocessor">#define LED_YELLOW_PIN (PIN_TO_BITMASK(LED_YELLOW_PIN_NUM)) </span><span class="comment">// Bit mask</span></div>
<div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ae52dce245c53b294fb89456e42f3508d">  252</a></span>&#160;<span class="preprocessor">#define LED_YELLOW_PORT LED_YELLOW_PORT_ENUM                </span><span class="comment">// HAL enum</span></div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ab9824ab080c30006c1baaa0dd7e863c5">  253</a></span>&#160;<span class="preprocessor">#define LED_RED_PIN (PIN_TO_BITMASK(LED_RED_PIN_NUM))       </span><span class="comment">// Bit mask</span></div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a7959a54f2383757d0007ee4b96071186">  254</a></span>&#160;<span class="preprocessor">#define LED_RED_PORT LED_RED_PORT_ENUM                      </span><span class="comment">// HAL enum</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">// Pin indices for array access (always the pin number!)</span></div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#afd991b7e173017e394c9d723b15e5f71">  258</a></span>&#160;<span class="preprocessor">#define LED_GREEN_PIN_INDEX LED_GREEN_PIN_NUM   </span><span class="comment">// 0</span></div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a85db005145fcc98aa2372bae0ec286f4">  259</a></span>&#160;<span class="preprocessor">#define LED_YELLOW_PIN_INDEX LED_YELLOW_PIN_NUM </span><span class="comment">// 1</span></div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a886d730d34d794534809fdc9a5a85a1a">  260</a></span>&#160;<span class="preprocessor">#define LED_RED_PIN_INDEX LED_RED_PIN_NUM       </span><span class="comment">// 14</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">// User button computed definitions</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">// NOTE: emergency_stop_abstracted.c uses HAL abstraction, so it needs HAL enum</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">// values NOTE: emergency_stop.c uses direct STM32 HAL, so it would need STM32</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">// HAL pointers For now, providing HAL abstraction enums for the abstracted</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">// modules</span></div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a34df6915e3013d6a0c74131d3946b659">  267</a></span>&#160;<span class="preprocessor">#define USER_BUTTON_PIN                                                       \</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="preprocessor">    (PIN_TO_BITMASK(USER_BUTTON_PIN_NUM))         </span><span class="comment">// GPIO_PIN_13 bit mask</span></div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a122d98da2c5c2666cb014b44cf513c4f">  269</a></span>&#160;<span class="preprocessor">#define USER_BUTTON_PORT USER_BUTTON_PORT_ENUM    </span><span class="comment">// HAL_GPIO_PORT_C enum</span></div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a2ff4b0d2a8f8701e94264e153532c2c2">  270</a></span>&#160;<span class="preprocessor">#define USER_BUTTON_PIN_INDEX USER_BUTTON_PIN_NUM </span><span class="comment">// 13</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">// Direct STM32 HAL versions (for modules that use direct HAL)</span></div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a1e175f323aab035af9202ec144bdf47e">  273</a></span>&#160;<span class="preprocessor">#define USER_BUTTON_STM32_PORT GPIOC      </span><span class="comment">// STM32 HAL port pointer</span></div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ae4d85a4f62f6e5d6faf89d10f4977e4d">  274</a></span>&#160;<span class="preprocessor">#define USER_BUTTON_STM32_PIN GPIO_PIN_13 </span><span class="comment">// STM32 HAL pin mask</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">// Safety relay computed definitions</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">// HAL abstraction versions (for modules using HAL abstraction)</span></div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a1e2ba4522b6b25b076ce34892253aa59">  278</a></span>&#160;<span class="preprocessor">#define SAFETY_RELAY1_PIN                                                     \</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="preprocessor">    (PIN_TO_BITMASK(SAFETY_RELAY1_PIN_NUM))        </span><span class="comment">// GPIO_PIN_4 bit mask</span></div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#acab27d96cab6baed70a0fdfc1e1915e0">  280</a></span>&#160;<span class="preprocessor">#define SAFETY_RELAY1_PORT SAFETY_RELAY1_PORT_ENUM </span><span class="comment">// HAL_GPIO_PORT_C enum</span></div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ac75f3748c1d3f5f23cbdaa96a59ab453">  281</a></span>&#160;<span class="preprocessor">#define SAFETY_RELAY2_PIN                                                     \</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="preprocessor">    (PIN_TO_BITMASK(SAFETY_RELAY2_PIN_NUM))        </span><span class="comment">// GPIO_PIN_5 bit mask</span></div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a23d6b78666dded28730480abb2692e6e">  283</a></span>&#160;<span class="preprocessor">#define SAFETY_RELAY2_PORT SAFETY_RELAY2_PORT_ENUM </span><span class="comment">// HAL_GPIO_PORT_C enum</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">// Direct STM32 HAL versions (for modules that use direct HAL)</span></div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a63afef032705ba89e8acf5da7257c84a">  286</a></span>&#160;<span class="preprocessor">#define SAFETY_RELAY1_STM32_PIN GPIO_PIN_4            </span><span class="comment">// STM32 HAL pin mask</span></div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ac0f41b557d41ee5270a39a54e6dbc536">  287</a></span>&#160;<span class="preprocessor">#define SAFETY_RELAY1_STM32_PORT GPIOC                </span><span class="comment">// STM32 HAL port pointer</span></div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a12bf5ccacc6aacd7c523d58bf3cd6a23">  288</a></span>&#160;<span class="preprocessor">#define SAFETY_RELAY2_STM32_PIN GPIO_PIN_5            </span><span class="comment">// STM32 HAL pin mask</span></div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a84e96425194985d9f4e0782dff2400e7">  289</a></span>&#160;<span class="preprocessor">#define SAFETY_RELAY2_STM32_PORT GPIOC                </span><span class="comment">// STM32 HAL port pointer</span></div>
<div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a660cf810d1b102c118d1b38e86438980">  290</a></span>&#160;<span class="preprocessor">#define SAFETY_RELAY1_PIN_INDEX SAFETY_RELAY1_PIN_NUM </span><span class="comment">// 4</span></div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a77878044b96ebd21b3731d792ec74fe6">  291</a></span>&#160;<span class="preprocessor">#define SAFETY_RELAY2_PIN_INDEX SAFETY_RELAY2_PIN_NUM </span><span class="comment">// 5</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">// Emergency Stop System Hardware (SSOT) - Safety Critical</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">// HAL abstraction versions (for modules using HAL abstraction)</span></div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a52f54436c335982ff4150c536b9e1edc">  295</a></span>&#160;<span class="preprocessor">#define ESTOP_BUTTON_PIN USER_BUTTON_PIN </span><span class="comment">// Emergency stop button (bit mask)</span></div>
<div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a35159c86c1975ff7b6f11757b292c3ca">  296</a></span>&#160;<span class="preprocessor">#define ESTOP_BUTTON_PORT                                                     \</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="preprocessor">    USER_BUTTON_PORT </span><span class="comment">// Emergency stop button port (HAL enum)</span></div>
<div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a973c7fb7f863739e93b163e406e7412a">  298</a></span>&#160;<span class="preprocessor">#define ESTOP_BUTTON_PIN_INDEX                                                \</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="preprocessor">    USER_BUTTON_PIN_INDEX </span><span class="comment">// Pin index for tests (13)</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">// Direct STM32 HAL versions (for modules that use direct HAL)</span></div>
<div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aa8f50388657019577bcc06aad8121042">  302</a></span>&#160;<span class="preprocessor">#define ESTOP_BUTTON_STM32_PIN USER_BUTTON_STM32_PIN </span><span class="comment">// STM32 HAL pin mask</span></div>
<div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aecb14614d01d835108d3add23bf01087">  303</a></span>&#160;<span class="preprocessor">#define ESTOP_BUTTON_STM32_PORT                                               \</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="preprocessor">    USER_BUTTON_STM32_PORT </span><span class="comment">// STM32 HAL port pointer</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">// Emergency stop LED mapping for HAL abstraction compatibility</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="preprocessor">#ifdef USE_STM32_HAL_DIRECT</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">// For STM32 HAL direct usage - emergency stop uses HAL abstraction, so use HAL</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">// enum</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="preprocessor">#define ESTOP_LED_PIN LED_RED_PIN </span><span class="comment">// Emergency stop LED pin mask</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="preprocessor">#define ESTOP_LED_PORT                                                        \</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="preprocessor">    LED_RED_PORT_ENUM </span><span class="comment">// HAL abstraction enum for emergency stop</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">// For HAL abstraction and host tests</span></div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a71c1dbb39065294502d66c0821ec2786">  315</a></span>&#160;<span class="preprocessor">#define ESTOP_LED_PIN LED_RED_PIN        </span><span class="comment">// Emergency stop LED pin mask</span></div>
<div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a8a0facf410b6469be118e9f5f15c6fff">  316</a></span>&#160;<span class="preprocessor">#define ESTOP_LED_PORT LED_RED_PORT_ENUM </span><span class="comment">// HAL abstraction enum</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a6ee27549c6669590869aa082f1d967fe">  318</a></span>&#160;<span class="preprocessor">#define ESTOP_LED_PIN_INDEX LED_RED_PIN_INDEX </span><span class="comment">// Pin index for tests (14)</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">/* Motor Enable/Disable Pins (SSOT)                                          */</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor">#ifdef FIRMWARE_BUILD</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">// Firmware build: Use STM32 HAL constants</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="preprocessor">#define MOTOR1_ENABLE_PIN GPIO_PIN_6 </span><span class="comment">// Motor 1 enable signal</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="preprocessor">#define MOTOR1_ENABLE_PORT GPIOC</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="preprocessor">#define MOTOR2_ENABLE_PIN GPIO_PIN_7 </span><span class="comment">// Motor 2 enable signal</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor">#define MOTOR2_ENABLE_PORT GPIOC</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">// Host test build: Use HAL abstraction constants</span></div>
<div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#adfc52319bffd5e9f8e874cdd276d038c">  333</a></span>&#160;<span class="preprocessor">#define MOTOR1_ENABLE_PIN (1U &lt;&lt; 6)        </span><span class="comment">// GPIO_PIN_6 equivalent</span></div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#add1b7133f648f85c7756126fce557cf6">  334</a></span>&#160;<span class="preprocessor">#define MOTOR1_ENABLE_PORT HAL_GPIO_PORT_C </span><span class="comment">// HAL abstraction enum</span></div>
<div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a9c83210ff7bd5a0ea26392044d87d22a">  335</a></span>&#160;<span class="preprocessor">#define MOTOR2_ENABLE_PIN (1U &lt;&lt; 7)        </span><span class="comment">// GPIO_PIN_7 equivalent</span></div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ae9a21a70242b9ea1cad6e8c85360d96f">  336</a></span>&#160;<span class="preprocessor">#define MOTOR2_ENABLE_PORT HAL_GPIO_PORT_C </span><span class="comment">// HAL abstraction enum</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">/* Timer Configuration for Control Loop and PWM (SSOT)                      */</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">// TODO: See .instructions/control-timing.md for real-time control requirements</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">// Control loop timer (1kHz control frequency)</span></div>
<div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a852bf6b5401b95692ae8dbb6f72f2bb7">  347</a></span>&#160;<span class="preprocessor">#define CONTROL_TIMER_INSTANCE TIM2</span></div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ad9dc6c3017838162563ebe6bfd803d54">  348</a></span>&#160;<span class="preprocessor">#define CONTROL_TIMER_FREQ_HZ 1000</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">// General purpose timer for timeouts and delays</span></div>
<div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a3e501d1ba84a3bc5dd3880fd375f527a">  351</a></span>&#160;<span class="preprocessor">#define GENERAL_TIMER_INSTANCE TIM3</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">/* DMA Configuration for High-Performance Transfers (SSOT)                  */</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">// TODO: See .github/instructions/hardware-pins.instructions.md for efficient</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">// peripheral data transfer</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">// SPI DMA channels for L6470 communication</span></div>
<div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a4346b0474f1b22ad7a5154c40ed4a086">  362</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_DMA_TX_STREAM DMA1_Stream4</span></div>
<div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a1ff8934664f1bfbaa3675ed25fbb64af">  363</a></span>&#160;<span class="preprocessor">#define MOTOR_SPI_DMA_RX_STREAM DMA1_Stream3</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">// UART DMA for command processing</span></div>
<div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a092936e3bc371898f6fd0690486d3c60">  366</a></span>&#160;<span class="preprocessor">#define UART_DMA_TX_STREAM DMA1_Stream2</span></div>
<div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a347f30eb8dd2bb969a3095410010eb8e">  367</a></span>&#160;<span class="preprocessor">#define UART_DMA_RX_STREAM DMA1_Stream1</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">/* Clock Configuration Parameters (SSOT)                                     */</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">// TODO: See .github/instructions/hardware-pins.instructions.md for system</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">// clock tree setup</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">// Protect against redefinition warnings - only define if not already defined</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="preprocessor">#ifndef HSE_VALUE</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="preprocessor">#define HSE_VALUE 8000000UL </span><span class="comment">// External crystal frequency (8MHz on Nucleo-144)</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="preprocessor">#ifndef LSE_VALUE</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="preprocessor">#define LSE_VALUE 32768UL </span><span class="comment">// LSE crystal for RTC</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="preprocessor">#ifndef VDD_VALUE</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="preprocessor">#define VDD_VALUE 3300UL </span><span class="comment">// VDD voltage in millivolts</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">// Power supply monitoring constants</span></div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a26e30f57d389d829623591d7500f4bfc">  391</a></span>&#160;<span class="preprocessor">#define SUPPLY_VOLTAGE_MIN_MV 10000 </span><span class="comment">// Minimum supply voltage (10V)</span></div>
<div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a9d0d9e883b5385cd15980c10400f479c">  392</a></span>&#160;<span class="preprocessor">#define SUPPLY_VOLTAGE_MAX_MV 15000 </span><span class="comment">// Maximum supply voltage (15V)</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">// Temperature monitoring constants</span></div>
<div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ac0decd2e48a7fc46783dfa9d064dd6e1">  395</a></span>&#160;<span class="preprocessor">#define SYSTEM_MAX_TEMP_C 85 </span><span class="comment">// Maximum system temperature</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">// Position error constants</span></div>
<div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a2f2edf5b882e1d4a24e568957fd86246">  398</a></span>&#160;<span class="preprocessor">#define MAX_POSITION_ERROR_STEPS 100 </span><span class="comment">// Maximum position error in steps</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ab8152d71891538c19c0707f252ac423e">  400</a></span>&#160;<span class="preprocessor">#define SYSTEM_CLOCK_FREQ 480000000UL </span><span class="comment">// System clock frequency</span></div>
<div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ac83c472139a2d1f6b46278acc8fc86a2">  401</a></span>&#160;<span class="preprocessor">#define AHB_CLOCK_FREQ 240000000UL    </span><span class="comment">// AHB bus frequency</span></div>
<div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a599290d7ec539bf7e9cfda164ad425ed">  402</a></span>&#160;<span class="preprocessor">#define APB1_CLOCK_FREQ 120000000UL   </span><span class="comment">// APB1 bus frequency</span></div>
<div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a75caa70a98b1af5902ed43c67df007d9">  403</a></span>&#160;<span class="preprocessor">#define APB2_CLOCK_FREQ 120000000UL   </span><span class="comment">// APB2 bus frequency</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">/* Memory Map Configuration (SSOT)                                           */</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">// TODO: See .github/instructions/hardware-pins.instructions.md for STM32H7</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">// memory organization</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">// STM32H753ZI Memory Layout</span></div>
<div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a0571de796f539e5779da6a9203190645">  414</a></span>&#160;<span class="preprocessor">#define FLASH_BASE_ADDR 0x08000000UL</span></div>
<div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a420e2a051a85a861f51fb093fa3efd14">  415</a></span>&#160;<span class="preprocessor">#define FLASH_SIZE_BYTES (2048 * 1024) </span><span class="comment">// 2MB Flash</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#abe5be0f6549d1fef128580c7216d6927">  417</a></span>&#160;<span class="preprocessor">#define DTCM_RAM_BASE_ADDR 0x20000000UL </span><span class="comment">// 128KB DTCM</span></div>
<div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#af32961690d9a387513ec7290c9dbb256">  418</a></span>&#160;<span class="preprocessor">#define DTCM_RAM_SIZE_BYTES (128 * 1024)</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#ac4252994ec0ad48e43c36d73c9feb900">  420</a></span>&#160;<span class="preprocessor">#define AXI_SRAM_BASE_ADDR 0x24000000UL </span><span class="comment">// 512KB AXI SRAM</span></div>
<div class="line"><a name="l00421"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a61c64a31b98ed6853bb4f49ed82d6d2e">  421</a></span>&#160;<span class="preprocessor">#define AXI_SRAM_SIZE_BYTES (512 * 1024)</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#aa34f870516ccaf7129b13c8a5b2fabad">  423</a></span>&#160;<span class="preprocessor">#define SRAM1_BASE_ADDR 0x30000000UL </span><span class="comment">// 128KB SRAM1</span></div>
<div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a76c6028da5fb70d9268a2e9334604208">  424</a></span>&#160;<span class="preprocessor">#define SRAM1_SIZE_BYTES (128 * 1024)</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a887d911cf651e06e35dd9bf876d09115">  426</a></span>&#160;<span class="preprocessor">#define SRAM2_BASE_ADDR 0x30020000UL </span><span class="comment">// 128KB SRAM2</span></div>
<div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a30ba221a39a9dedebe5ce64a1b5adca5">  427</a></span>&#160;<span class="preprocessor">#define SRAM2_SIZE_BYTES (128 * 1024)</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a076d9ffdcdc9b60f822e21ba78dbd562">  429</a></span>&#160;<span class="preprocessor">#define SRAM3_BASE_ADDR 0x30040000UL </span><span class="comment">// 32KB SRAM3</span></div>
<div class="line"><a name="l00430"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#af797df47489f2dcf8aa364e31a77ac95">  430</a></span>&#160;<span class="preprocessor">#define SRAM3_SIZE_BYTES (32 * 1024)</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a1e719b0ff8a0673ec01dce22a1c2b65e">  432</a></span>&#160;<span class="preprocessor">#define SRAM4_BASE_ADDR 0x38000000UL </span><span class="comment">// 64KB SRAM4</span></div>
<div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#a98628bf247aa46956fa0258c58d8fe4e">  433</a></span>&#160;<span class="preprocessor">#define SRAM4_SIZE_BYTES (64 * 1024)</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">// Ethernet DMA buffers placement (must be in D2 domain)</span></div>
<div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="../../d3/d91/hardware__config_8h.html#abf943e31885a12c25ef54842e176a8e7">  436</a></span>&#160;<span class="preprocessor">#define ETH_DMA_BUFFER_BASE SRAM2_BASE_ADDR</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* HARDWARE_CONFIG_H */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="ttc" id="ahal__abstraction_8h_html"><div class="ttname"><a href="../../d6/dee/hal__abstraction_8h.html">hal_abstraction.h</a></div><div class="ttdoc">Hardware Abstraction Layer (HAL) Interface for STM32H753ZI.</div></div>
<div class="ttc" id="astm32h7xx__hal_8h_html"><div class="ttname"><a href="../../d8/d36/stm32h7xx__hal_8h.html">stm32h7xx_hal.h</a></div><div class="ttdoc">Mock STM32H7xx HAL header for unit testing.</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 11 2025 23:51:09 for STM32H753ZI Motor Control System by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
