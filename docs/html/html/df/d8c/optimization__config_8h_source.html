<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32H753ZI Motor Control System: src/config/optimization_config.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STM32H753ZI Motor Control System
   &#160;<span id="projectnumber">v1.0.0</span>
   </div>
   <div id="projectbrief">Advanced stepper motor control with X-CUBE-SPN2 and safety systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_7e83d1792d529f4aa7126ac7e0b3b699.html">config</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">optimization_config.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../df/d8c/optimization__config_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#ifndef OPTIMIZATION_CONFIG_H</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#define OPTIMIZATION_CONFIG_H</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;stdbool.h&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// Reference dependent SSOT configurations</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d58/motor__config_8h.html">motor_config.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d5c/safety__config_8h.html">safety_config.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d7e/system__config_8h.html">system_config.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// MOTOR ID TYPE DEFINITION (SSOT)</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a7e6ba10325884263277466dbe44522e4">   45</a></span>&#160;<span class="keyword">typedef</span> uint8_t <a class="code" href="../../df/d8c/optimization__config_8h.html#a7e6ba10325884263277466dbe44522e4">motor_id_t</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// OPTIMIZATION TARGETS AND PERFORMANCE</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a57341420666fa7f94b45a25a624b3b22">   58</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_TARGET_EFFICIENCY_PERCENT 85.0f</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a2724a55a7fef15ba30a8c7369b37f7d6">   59</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_MIN_IMPROVEMENT_PERCENT 15.0f</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a118a8b3c06faa179b8d51708a0596eac">   60</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_MAX_IMPROVEMENT_PERCENT 25.0f</span></div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a24afec5126a56b5f7b7981c739e9d5d2">   61</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_BASELINE_EFFICIENCY_PERCENT 70.0f</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a2ffd7b512dbf0f7a26df2035e506f5eb">   69</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_CONVERGENCE_THRESHOLD_PERCENT                            \</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">    0.5f                                    </span><span class="comment">// Efficiency change &lt; 0.5%</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a6e23449fbe1f7404ffa338c4792f84e0">   71</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_CONVERGENCE_SAMPLES 10 </span><span class="comment">// Must be stable for 10 samples</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a38f1336b7f8612e02d8e6f68da504c28">   72</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_MAX_ITERATIONS 100     </span><span class="comment">// Maximum optimization iterations</span></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a02305bed42547f358746a1cf926e98ff">   73</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_CONVERGENCE_TIMEOUT_MS 30000 </span><span class="comment">// 30 second timeout</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">// ALGORITHM CONFIGURATION</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0">   85</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0a31edf3f800972547001de0501b02a73b">OPTIMIZATION_ALGORITHM_ADAPTIVE_CURRENT</a> =</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0a31edf3f800972547001de0501b02a73b">   87</a></span>&#160;        0, </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0a198b813bca885c92b1608006b5f973d8">OPTIMIZATION_ALGORITHM_SPEED_PROFILE</a>, </div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0a990dbb523d04832904206b3a6f08916d">   90</a></span>&#160;    <a class="code" href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0a990dbb523d04832904206b3a6f08916d">OPTIMIZATION_ALGORITHM_HYBRID</a>, </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0ac2f638fdd15e64c98c424cc601ce2658">OPTIMIZATION_ALGORITHM_ML_PREDICTIVE</a>, </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0a2ef6324d4ac990d471ab46262770efc3">OPTIMIZATION_ALGORITHM_COUNT</a></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0a2ef6324d4ac990d471ab46262770efc3">   94</a></span>&#160;} <a class="code" href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0">OptimizationAlgorithm_t</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a7ec7088f83598c608a75dd2142f6f5c2">  102</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_ALGORITHM_DEFAULT OPTIMIZATION_ALGORITHM_ADAPTIVE_CURRENT</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a0d4652acd9a472c0aafa46c5bc87f3f8">  110</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_ADAPTATION_RATE_DEFAULT 0.1f </span><span class="comment">// Conservative adaptation</span></div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a5bee9cd98895e7b1c4316dc165527e39">  111</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_ADAPTATION_RATE_FAST 0.3f    </span><span class="comment">// Fast adaptation</span></div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#ae890722f2e8f5bc28cd65ce1c929daea">  112</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_ADAPTATION_RATE_SLOW 0.05f   </span><span class="comment">// Slow, stable adaptation</span></div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a39879262e9199fcb56e6a9cc032bc12c">  113</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_ADAPTATION_RATE_MIN 0.01f    </span><span class="comment">// Minimum allowed rate</span></div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a739566c02fc1316cb607d79ae41dfbc5">  114</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_ADAPTATION_RATE_MAX 0.5f     </span><span class="comment">// Maximum allowed rate</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">// ADAPTIVE CURRENT OPTIMIZATION</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a6324f327444bffd948152e0840e46940">  127</a></span>&#160;<span class="preprocessor">#define ADAPTIVE_CURRENT_STEP_SIZE_A 0.05f </span><span class="comment">// Current adjustment step (Amperes)</span></div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#adeb36ab7b7c8bc8eb25b2f189ab85760">  128</a></span>&#160;<span class="preprocessor">#define ADAPTIVE_CURRENT_MIN_CURRENT_A 0.3f </span><span class="comment">// Minimum allowed current</span></div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#ad961cd46f73bd75922169ddf939957ff">  129</a></span>&#160;<span class="preprocessor">#define ADAPTIVE_CURRENT_MAX_CURRENT_A                                        \</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">    MOTOR_MAX_CURRENT_A </span><span class="comment">// Reference SSOT motor config</span></div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#ae864cdf67a4a20c9a24fcd8ef3c1939d">  131</a></span>&#160;<span class="preprocessor">#define ADAPTIVE_CURRENT_EFFICIENCY_WINDOW_SIZE 5 </span><span class="comment">// Moving average window</span></div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a333cda09acfa20ffee790ed4cfeb6f91">  132</a></span>&#160;<span class="preprocessor">#define ADAPTIVE_CURRENT_DIRECTION_HOLD_COUNT                                 \</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">    3 </span><span class="comment">// Samples before direction change</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a5821b9ec66ac52e9e5055fc1ef8a8b3a">  141</a></span>&#160;<span class="preprocessor">#define ADAPTIVE_CURRENT_SAFETY_MARGIN_PERCENT 10.0f </span><span class="comment">// 10% safety margin</span></div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a0dbccace35c1caca26976afcbc7a1542">  142</a></span>&#160;<span class="preprocessor">#define ADAPTIVE_CURRENT_THERMAL_DERATING_TEMP_C                              \</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">    MOTOR_MAX_TEMPERATURE_C - 10.0f</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">// SPEED PROFILE OPTIMIZATION</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a2fd5b8787860d15abe237b923f4bdb71">  155</a></span>&#160;<span class="preprocessor">#define SPEED_PROFILE_MIN_SPEED_RPM 50.0f </span><span class="comment">// Minimum optimization speed</span></div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a64d0621b05a4133b1f7523526b3596c3">  156</a></span>&#160;<span class="preprocessor">#define SPEED_PROFILE_MAX_SPEED_RPM                                           \</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">    MOTOR_MAX_SPEED_RPM </span><span class="comment">// Reference SSOT motor config</span></div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a25a1edd2295dd00caa0129fc2494fe5e">  158</a></span>&#160;<span class="preprocessor">#define SPEED_PROFILE_ACCELERATION_FACTOR                                     \</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">    0.8f </span><span class="comment">// Conservative acceleration factor</span></div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a6dc02ba53c0ee3630fe86118ef0e5136">  160</a></span>&#160;<span class="preprocessor">#define SPEED_PROFILE_DECELERATION_FACTOR                                     \</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">    0.9f                                    </span><span class="comment">// Conservative deceleration factor</span></div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#abdef9486b48af073b836744182dbe550">  162</a></span>&#160;<span class="preprocessor">#define SPEED_PROFILE_SMOOTHING_FACTOR 0.1f </span><span class="comment">// Profile smoothing coefficient</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">// TELEMETRY INTEGRATION</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a9dd2755e22e7b6f4ffe30f17366a2a61">  174</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_TELEMETRY_UPDATE_RATE_HZ 100 </span><span class="comment">// 100 Hz telemetry updates</span></div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a57211c0695b0c60cf5f63c726ce60622">  175</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_TELEMETRY_BUFFER_SIZE 50 </span><span class="comment">// Circular buffer for history</span></div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a0409ed30950f49614479afc9eb1a3840">  176</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_TELEMETRY_TIMEOUT_MS 100 </span><span class="comment">// Telemetry timeout</span></div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#aab3887cf56a88c25c470294274ee93b8">  177</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_TELEMETRY_REQUIRED_SAMPLES                               \</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">    5 </span><span class="comment">// Min samples before optimization</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a88923805b273b5bf8bcd1a919a843d4f">  186</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_METRICS_HISTORY_SIZE 100 </span><span class="comment">// Performance history samples</span></div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a5316c3b7dd0471395c68104498cf791d">  187</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_METRICS_UPDATE_INTERVAL_MS 1000 </span><span class="comment">// 1 second metric updates</span></div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a66d83de622b3cb82c886dcb26ee34be4">  188</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_BASELINE_COLLECTION_TIME_MS                              \</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor">    10000 </span><span class="comment">// 10 second baseline collection</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">// SAFETY AND FAULT HANDLING</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#ab76d889c507568e0678a88d6d4a3109f">  201</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_MAX_CURRENT_CHANGE_PER_STEP_A                            \</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="preprocessor">    0.2f </span><span class="comment">// Maximum current change per iteration</span></div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a97d53de73f5609b2387a36e9f7f77c08">  203</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_MAX_SPEED_CHANGE_PER_STEP_RPM                            \</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="preprocessor">    100.0f </span><span class="comment">// Maximum speed change per iteration</span></div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#ab46b585858fe84abb15cbcddce8e84bd">  205</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_MIN_EFFICIENCY_THRESHOLD_PERCENT                         \</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="preprocessor">    50.0f                                      </span><span class="comment">// Minimum acceptable efficiency</span></div>
<div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#adcad0c0458d15e87234d11653ca16ff6">  207</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_FAULT_DETECTION_SAMPLES 3 </span><span class="comment">// Consecutive fault samples</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111d">  215</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111dafabb2995de3b56890b83a4d15a721be1">  216</a></span>&#160;    <a class="code" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111dafabb2995de3b56890b83a4d15a721be1">OPTIMIZATION_FAULT_NONE</a> = 0,               </div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111da4eccc1bf6576489b8412aff8851ad94a">  217</a></span>&#160;    <a class="code" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111da4eccc1bf6576489b8412aff8851ad94a">OPTIMIZATION_FAULT_EFFICIENCY_DEGRADATION</a>, </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111dac6fb599f25e15a6330e8fe069b2773fd">OPTIMIZATION_FAULT_CURRENT_LIMIT_EXCEEDED</a>, </div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111da07cbf9348e6c1edd4297ddb919ad6dff">  220</a></span>&#160;    <a class="code" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111da07cbf9348e6c1edd4297ddb919ad6dff">OPTIMIZATION_FAULT_SPEED_LIMIT_EXCEEDED</a>,   </div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111dabc620cc528696a961d68d0b89399463d">  221</a></span>&#160;    <a class="code" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111dabc620cc528696a961d68d0b89399463d">OPTIMIZATION_FAULT_TEMPERATURE_LIMIT</a>,      </div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111da9d9c0e42093d3fab7e9b137e7a23c18a">  222</a></span>&#160;    <a class="code" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111da9d9c0e42093d3fab7e9b137e7a23c18a">OPTIMIZATION_FAULT_TELEMETRY_TIMEOUT</a>,      </div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111da75b16d319841a53bcf3b0cdd08855f8a">  223</a></span>&#160;    <a class="code" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111da75b16d319841a53bcf3b0cdd08855f8a">OPTIMIZATION_FAULT_CONVERGENCE_TIMEOUT</a>,    </div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111da299e610f33e7f8b662374f51b85a9c58">  224</a></span>&#160;    <a class="code" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111da299e610f33e7f8b662374f51b85a9c58">OPTIMIZATION_FAULT_INVALID_PARAMETERS</a>, </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111dac4b0051e681f129c606279994d6b8480">OPTIMIZATION_FAULT_COUNT</a></div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111dac4b0051e681f129c606279994d6b8480">  226</a></span>&#160;} <a class="code" href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111d">OptimizationFault_t</a>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a84522927fdd848d129993edb7e0eb2b8">  234</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_FAULT_RECOVERY_ATTEMPTS 3 </span><span class="comment">// Number of recovery attempts</span></div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a617192a59aa201280e2d5b654b01142c">  235</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_FAULT_RECOVERY_DELAY_MS                                  \</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">    5000                                     </span><span class="comment">// Delay between recovery attempts</span></div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a4479334d21383408242675da11886dae">  237</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_FALLBACK_CURRENT_A 1.0f </span><span class="comment">// Safe fallback current</span></div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a4245ee36f41d912c80fb4b0f02bd8f3d">  238</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_FALLBACK_SPEED_RPM 500.0f </span><span class="comment">// Safe fallback speed</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">// SIMULATION AND TESTING</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#aa43001523d1194e4d7af542d2eec280e">  250</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_SIMULATION_NOISE_FACTOR 0.02f  </span><span class="comment">// 2% measurement noise</span></div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a00dc33e471b8d89ee54568d60b31cfa7">  251</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_SIMULATION_UPDATE_RATE_HZ 1000 </span><span class="comment">// 1 kHz simulation rate</span></div>
<div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a522eb4a912462252ddfb99286cde221c">  252</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_SIMULATION_THERMAL_TIME_CONSTANT                         \</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor">    30.0f </span><span class="comment">// 30 second thermal time constant</span></div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#af01a6c7fb2fd526e81f833b056d3de26">  254</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_SIMULATION_LOAD_VARIATION_PERCENT                        \</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="preprocessor">    10.0f </span><span class="comment">// 10% load variation</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a4dc3e5f611141a8817ec2839f4f046f7">  263</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_MOCK_BASELINE_CURRENT_A 1.5f    </span><span class="comment">// Mock baseline current</span></div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a1efac937d74368d45c381d498afc9881">  264</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_MOCK_BASELINE_SPEED_RPM 1000.0f </span><span class="comment">// Mock baseline speed</span></div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a38755ab9f98f92d774f7b8e078003020">  265</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_MOCK_BASELINE_EFFICIENCY_PERCENT                         \</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="preprocessor">    72.0f </span><span class="comment">// Mock baseline efficiency</span></div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a05eb28b399367c0e922a1f90ec6832f9">  267</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_MOCK_TEMPERATURE_AMBIENT_C                               \</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="preprocessor">    25.0f </span><span class="comment">// Mock ambient temperature</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">// INTEGRATION WITH OTHER SYSTEMS</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a1698326186683ec6e429d4d03b8415f9">  280</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_CHARACTERIZATION_REQUIRED                                \</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">    true </span><span class="comment">// Characterization data required</span></div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#aca26f5eb10fd8fa5f94042a792853538">  282</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_CHARACTERIZATION_TIMEOUT_MS                              \</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="preprocessor">    5000 </span><span class="comment">// Timeout waiting for characterization</span></div>
<div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a45a2b393f3a562e702597e5acc0c205a">  284</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_USE_CHARACTERIZED_CURRENT                                \</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="preprocessor">    true </span><span class="comment">// Use optimal current from characterization</span></div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#ac91ad15a5874fec62f6f681ec1dbd358">  286</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_CHARACTERIZATION_CONFIDENCE_MIN                          \</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="preprocessor">    0.8f </span><span class="comment">// Minimum characterization confidence</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#ac35337a22d53b6fe62a9a46778cc2b5d">  295</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_TASK_PRIORITY                                            \</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="preprocessor">    (RTOS_PRIORITY_MOTOR_CONTROL - 1)     </span><span class="comment">// Lower than motor control</span></div>
<div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#adb41f366e57855b345fd68167ef4a36f">  297</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_TASK_STACK_SIZE 2048 </span><span class="comment">// Task stack size in words</span></div>
<div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a7e1252c86243d8f75be7c23429ff4b16">  298</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_TASK_PERIOD_MS 10    </span><span class="comment">// 100 Hz optimization rate</span></div>
<div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#ac0f6b05741fa96407b82a5e61c09470d">  299</a></span>&#160;<span class="preprocessor">#define OPTIMIZATION_QUEUE_SIZE 10        </span><span class="comment">// Command queue size</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">// VALIDATION MACROS</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">// =============================================================================</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">// _Static_assert(OPTIMIZATION_TARGET_EFFICIENCY_PERCENT &gt;</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">//                   OPTIMIZATION_BASELINE_EFFICIENCY_PERCENT,</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">//               &quot;Target efficiency must be greater than baseline efficiency&quot;);</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">// _Static_assert(OPTIMIZATION_MIN_IMPROVEMENT_PERCENT &lt;</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">//                   OPTIMIZATION_MAX_IMPROVEMENT_PERCENT,</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">//               &quot;Minimum improvement must be less than maximum improvement&quot;);</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">// _Static_assert(</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">//    ADAPTIVE_CURRENT_MAX_CURRENT_A &lt;= MOTOR_MAX_CURRENT_A,</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">//    &quot;Adaptive current limit must not exceed SSOT motor current limit&quot;);</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">// _Static_assert(SPEED_PROFILE_MAX_SPEED_RPM &lt;= MOTOR_MAX_SPEED_RPM,</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">//               &quot;Speed profile limit must not exceed SSOT motor speed limit&quot;);</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#af2f2b6c22f1fcc91be23206445497eb2">  328</a></span>&#160;<a class="code" href="../../df/d8c/optimization__config_8h.html#af2f2b6c22f1fcc91be23206445497eb2">_Static_assert</a>(<a class="code" href="../../df/d8c/optimization__config_8h.html#a9dd2755e22e7b6f4ffe30f17366a2a61">OPTIMIZATION_TELEMETRY_UPDATE_RATE_HZ</a> &lt;= 1000,</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;               <span class="stringliteral">&quot;Telemetry update rate must not exceed 1 kHz&quot;</span>);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="../../df/d8c/optimization__config_8h.html#a0f4e3a0ea211a90439612dcd959ca92c">  331</a></span>&#160;<a class="code" href="../../df/d8c/optimization__config_8h.html#af2f2b6c22f1fcc91be23206445497eb2">_Static_assert</a>(<a class="code" href="../../df/d8c/optimization__config_8h.html#a02305bed42547f358746a1cf926e98ff">OPTIMIZATION_CONVERGENCE_TIMEOUT_MS</a> &gt;= 10000,</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;               <span class="stringliteral">&quot;Convergence timeout must be at least 10 seconds&quot;</span>);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// OPTIMIZATION_CONFIG_H</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="ttc" id="amotor__config_8h_html"><div class="ttname"><a href="../../de/d58/motor__config_8h.html">motor_config.h</a></div><div class="ttdoc">Motor and L6470 Driver Configuration - Single Source of Truth (SSOT)</div></div>
<div class="ttc" id="aoptimization__config_8h_html_a02305bed42547f358746a1cf926e98ff"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a02305bed42547f358746a1cf926e98ff">OPTIMIZATION_CONVERGENCE_TIMEOUT_MS</a></div><div class="ttdeci">#define OPTIMIZATION_CONVERGENCE_TIMEOUT_MS</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00073">optimization_config.h:73</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a11feff560ded771b6e902647a6aa111d"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111d">OptimizationFault_t</a></div><div class="ttdeci">OptimizationFault_t</div><div class="ttdoc">Optimization fault conditions.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00215">optimization_config.h:215</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a11feff560ded771b6e902647a6aa111da07cbf9348e6c1edd4297ddb919ad6dff"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111da07cbf9348e6c1edd4297ddb919ad6dff">OPTIMIZATION_FAULT_SPEED_LIMIT_EXCEEDED</a></div><div class="ttdeci">@ OPTIMIZATION_FAULT_SPEED_LIMIT_EXCEEDED</div><div class="ttdoc">Speed safety limit exceeded.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00220">optimization_config.h:220</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a11feff560ded771b6e902647a6aa111da299e610f33e7f8b662374f51b85a9c58"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111da299e610f33e7f8b662374f51b85a9c58">OPTIMIZATION_FAULT_INVALID_PARAMETERS</a></div><div class="ttdeci">@ OPTIMIZATION_FAULT_INVALID_PARAMETERS</div><div class="ttdoc">Invalid optimization parameters.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00224">optimization_config.h:224</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a11feff560ded771b6e902647a6aa111da4eccc1bf6576489b8412aff8851ad94a"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111da4eccc1bf6576489b8412aff8851ad94a">OPTIMIZATION_FAULT_EFFICIENCY_DEGRADATION</a></div><div class="ttdeci">@ OPTIMIZATION_FAULT_EFFICIENCY_DEGRADATION</div><div class="ttdoc">Efficiency getting worse.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00217">optimization_config.h:217</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a11feff560ded771b6e902647a6aa111da75b16d319841a53bcf3b0cdd08855f8a"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111da75b16d319841a53bcf3b0cdd08855f8a">OPTIMIZATION_FAULT_CONVERGENCE_TIMEOUT</a></div><div class="ttdeci">@ OPTIMIZATION_FAULT_CONVERGENCE_TIMEOUT</div><div class="ttdoc">Failed to converge in time.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00223">optimization_config.h:223</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a11feff560ded771b6e902647a6aa111da9d9c0e42093d3fab7e9b137e7a23c18a"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111da9d9c0e42093d3fab7e9b137e7a23c18a">OPTIMIZATION_FAULT_TELEMETRY_TIMEOUT</a></div><div class="ttdeci">@ OPTIMIZATION_FAULT_TELEMETRY_TIMEOUT</div><div class="ttdoc">Telemetry data timeout.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00222">optimization_config.h:222</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a11feff560ded771b6e902647a6aa111dabc620cc528696a961d68d0b89399463d"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111dabc620cc528696a961d68d0b89399463d">OPTIMIZATION_FAULT_TEMPERATURE_LIMIT</a></div><div class="ttdeci">@ OPTIMIZATION_FAULT_TEMPERATURE_LIMIT</div><div class="ttdoc">Temperature limit exceeded.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00221">optimization_config.h:221</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a11feff560ded771b6e902647a6aa111dac4b0051e681f129c606279994d6b8480"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111dac4b0051e681f129c606279994d6b8480">OPTIMIZATION_FAULT_COUNT</a></div><div class="ttdeci">@ OPTIMIZATION_FAULT_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00226">optimization_config.h:225</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a11feff560ded771b6e902647a6aa111dac6fb599f25e15a6330e8fe069b2773fd"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111dac6fb599f25e15a6330e8fe069b2773fd">OPTIMIZATION_FAULT_CURRENT_LIMIT_EXCEEDED</a></div><div class="ttdeci">@ OPTIMIZATION_FAULT_CURRENT_LIMIT_EXCEEDED</div><div class="ttdoc">Current safety limit exceeded.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00219">optimization_config.h:218</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a11feff560ded771b6e902647a6aa111dafabb2995de3b56890b83a4d15a721be1"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a11feff560ded771b6e902647a6aa111dafabb2995de3b56890b83a4d15a721be1">OPTIMIZATION_FAULT_NONE</a></div><div class="ttdeci">@ OPTIMIZATION_FAULT_NONE</div><div class="ttdoc">No fault detected.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00216">optimization_config.h:216</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a7474f52cb33b672590baca4d5a656eb0"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0">OptimizationAlgorithm_t</a></div><div class="ttdeci">OptimizationAlgorithm_t</div><div class="ttdoc">Optimization algorithm modes.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00085">optimization_config.h:85</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a7474f52cb33b672590baca4d5a656eb0a198b813bca885c92b1608006b5f973d8"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0a198b813bca885c92b1608006b5f973d8">OPTIMIZATION_ALGORITHM_SPEED_PROFILE</a></div><div class="ttdeci">@ OPTIMIZATION_ALGORITHM_SPEED_PROFILE</div><div class="ttdoc">Optimize speed profiles for efficiency.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00089">optimization_config.h:88</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a7474f52cb33b672590baca4d5a656eb0a2ef6324d4ac990d471ab46262770efc3"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0a2ef6324d4ac990d471ab46262770efc3">OPTIMIZATION_ALGORITHM_COUNT</a></div><div class="ttdeci">@ OPTIMIZATION_ALGORITHM_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00094">optimization_config.h:93</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a7474f52cb33b672590baca4d5a656eb0a31edf3f800972547001de0501b02a73b"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0a31edf3f800972547001de0501b02a73b">OPTIMIZATION_ALGORITHM_ADAPTIVE_CURRENT</a></div><div class="ttdeci">@ OPTIMIZATION_ALGORITHM_ADAPTIVE_CURRENT</div><div class="ttdoc">Optimize motor current based on load.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00087">optimization_config.h:86</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a7474f52cb33b672590baca4d5a656eb0a990dbb523d04832904206b3a6f08916d"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0a990dbb523d04832904206b3a6f08916d">OPTIMIZATION_ALGORITHM_HYBRID</a></div><div class="ttdeci">@ OPTIMIZATION_ALGORITHM_HYBRID</div><div class="ttdoc">Combined current + speed optimization.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00090">optimization_config.h:90</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a7474f52cb33b672590baca4d5a656eb0ac2f638fdd15e64c98c424cc601ce2658"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a7474f52cb33b672590baca4d5a656eb0ac2f638fdd15e64c98c424cc601ce2658">OPTIMIZATION_ALGORITHM_ML_PREDICTIVE</a></div><div class="ttdeci">@ OPTIMIZATION_ALGORITHM_ML_PREDICTIVE</div><div class="ttdoc">ML-based predictive optimization (Phase 3.0)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00092">optimization_config.h:91</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a7e6ba10325884263277466dbe44522e4"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a7e6ba10325884263277466dbe44522e4">motor_id_t</a></div><div class="ttdeci">uint8_t motor_id_t</div><div class="ttdoc">Motor ID type for optimization system consistency.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00045">optimization_config.h:45</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_a9dd2755e22e7b6f4ffe30f17366a2a61"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#a9dd2755e22e7b6f4ffe30f17366a2a61">OPTIMIZATION_TELEMETRY_UPDATE_RATE_HZ</a></div><div class="ttdeci">#define OPTIMIZATION_TELEMETRY_UPDATE_RATE_HZ</div><div class="ttdoc">Telemetry integration configuration.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8c/optimization__config_8h_source.html#l00174">optimization_config.h:174</a></div></div>
<div class="ttc" id="aoptimization__config_8h_html_af2f2b6c22f1fcc91be23206445497eb2"><div class="ttname"><a href="../../df/d8c/optimization__config_8h.html#af2f2b6c22f1fcc91be23206445497eb2">_Static_assert</a></div><div class="ttdeci">_Static_assert(OPTIMIZATION_TELEMETRY_UPDATE_RATE_HZ&lt;=1000, &quot;Telemetry update rate must not exceed 1 kHz&quot;)</div><div class="ttdoc">Compile-time validation of optimization configuration.</div></div>
<div class="ttc" id="asafety__config_8h_html"><div class="ttname"><a href="../../d3/d5c/safety__config_8h.html">safety_config.h</a></div><div class="ttdoc">Safety Configuration - Single Source of Truth (SSOT)</div></div>
<div class="ttc" id="asystem__config_8h_html"><div class="ttname"><a href="../../d4/d7e/system__config_8h.html">system_config.h</a></div><div class="ttdoc">System-wide configuration parameters and feature flags.</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 11 2025 23:51:09 for STM32H753ZI Motor Control System by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
