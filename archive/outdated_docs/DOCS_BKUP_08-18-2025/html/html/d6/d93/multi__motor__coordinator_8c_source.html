<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32H753ZI Motor Control System: src/controllers/multi_motor_coordinator.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STM32H753ZI Motor Control System
   &#160;<span id="projectnumber">v1.0.0</span>
   </div>
   <div id="projectbrief">Advanced stepper motor control with X-CUBE-SPN2 and safety systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_bbd6674d859f4cefaacb708974cac240.html">controllers</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">multi_motor_coordinator.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d6/d93/multi__motor__coordinator_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html">multi_motor_coordinator.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d58/motor__config_8h.html">config/motor_config.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d5c/safety__config_8h.html">config/safety_config.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/dee/hal__abstraction_8h.html">hal_abstraction/hal_abstraction.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d07/motion__profile_8h.html">motion_profile.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/dba/position__control_8h.html">position_control.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d2b/fault__monitor_8h.html">safety/fault_monitor.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/* Forward Declarations for Static Functions                                 */</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">static</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a1da4ec0c4f1b05acdb292be41bdca884">validate_coordinated_move</a>(<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html">CoordinatedMoveCommand_t</a> *move_cmd);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">static</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a5bba34e842ab4e78a39b66c6e8af80cf">execute_synchronized_move</a>(<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html">CoordinatedMoveCommand_t</a> *move_cmd);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">static</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a9feb5cfe9a745afdda3bd228be9a13d1">execute_load_sharing_move</a>(<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html">CoordinatedMoveCommand_t</a> *move_cmd);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">static</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#ab381df96f41327f355d96b27f7696eb5">execute_master_slave_move</a>(<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html">CoordinatedMoveCommand_t</a> *move_cmd);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">static</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#adebe98cff7eb2071acbdd47131e29025">execute_independent_move</a>(<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html">CoordinatedMoveCommand_t</a> *move_cmd);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#ae5acb4f0a2da5035fa6bfde32f265541">update_motor_states</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a32ad0a18f759c463717fe62d90822702">update_synchronized_motion</a>(uint32_t dt_ms);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a390f343fce9648775d5d538f1fe3198c">update_load_sharing</a>(uint32_t dt_ms);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a074a36721b7021ed5aa29ccb21c6a665">update_master_slave_motion</a>(uint32_t dt_ms);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a260062f056919b369730b9e23506dd3e">check_motion_completion</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#abfab52c42a0911038bac7087d25251be">calculate_sync_error</a>(<a class="code" href="../../de/dba/structCoordinationStatus__t.html">CoordinationStatus_t</a> *status);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">static</span> uint32_t <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a17c4a602ba5ade936773ed248c5076c9">calculate_move_time</a>(int32_t distance, uint32_t max_velocity,</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                                    uint32_t acceleration);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">/* Private Variables                                                         */</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">/* ==========================================================================</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// Multi-motor coordination state</span></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">   54</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html">MultiMotorCoordinator_t</a> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#a9956a84af70db7e2078dd53761f4124a">   55</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a9956a84af70db7e2078dd53761f4124a">coordinator_initialized</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#a5fb5fa877f2673a9660118746f9672e9">   61</a></span>&#160;<a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a5fb5fa877f2673a9660118746f9672e9">multi_motor_init</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">// Clear coordinator state</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    memset(&amp;<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>));</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">// Initialize motor states</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a2f7d710b49be1a25a7685c507e8b642b">motor_id</a> = i;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a9e5b81836f2748ac26bea7e0568b8dc8">synchronized</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a23ea550c61b9ea0e552c2fbdef23f5bb">load_share_enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a18d3a3efa2a968e28468c8100d7f3dcf">priority</a> = <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a83aec0733039ab5ec2db733323030088adde78f85dedeaa4bd51de44cfe351ea2">MOTOR_PRIORITY_NORMAL</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">// Initialize synchronization parameters</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a2a22e347a66aec62040284f717819081">sync_config</a>.<a class="code" href="../../df/d1e/structSynchronizationConfig__t.html#a37e5b88528700dfe5ce48bd10db14f41">sync_tolerance</a> = <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4cdeda5cb0f27aeeb704a12a224cc4d0">SYNC_TOLERANCE_DEFAULT</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a2a22e347a66aec62040284f717819081">sync_config</a>.<a class="code" href="../../df/d1e/structSynchronizationConfig__t.html#ab36c9cee977c57e234390cc38be2448d">max_sync_wait_ms</a> = <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a224fd3fee0cc1fab48a84a6593fc0658">MAX_SYNC_WAIT_MS</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a2a22e347a66aec62040284f717819081">sync_config</a>.<a class="code" href="../../df/d1e/structSynchronizationConfig__t.html#ae448f3653a120cefc18e9bc671296577">sync_master</a> = 0; <span class="comment">// Motor 0 as default master</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// Initialize load sharing parameters</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a6fe2253c989b5ac3bc164a79bc8f1127">load_config</a>.<a class="code" href="../../d2/dd6/structLoadSharingConfig__t.html#acebd00045ffa71ff70dc47d20578927d">load_balance_enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a6fe2253c989b5ac3bc164a79bc8f1127">load_config</a>.<a class="code" href="../../d2/dd6/structLoadSharingConfig__t.html#a9d2a5e2085709372279a44a22ad1bd3d">load_threshold</a> = <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a80c27bccd4159b81da3cb85391034c28">LOAD_BALANCE_THRESHOLD</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a6fe2253c989b5ac3bc164a79bc8f1127">load_config</a>.<a class="code" href="../../d2/dd6/structLoadSharingConfig__t.html#a0f22b4b653d364af1e563ed6c3232589">max_load_difference</a> = <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a3ed5e918cd9246d587db67103931da66">MAX_LOAD_DIFFERENCE</a>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">// Initialize coordinated motion state</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a942e270d06f2e3abb0b2932fdd0dbe15">mode</a> = <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a2d856d710cbadcc3be1ff1039782bead">COORDINATION_MODE_INDEPENDENT</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a8ed53830dd401d583dfff58c8221ff52">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a73404a4b497634317a7d482b9c118b84">sequence_step</a> = 0;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a9956a84af70db7e2078dd53761f4124a">coordinator_initialized</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#abe045be6c5cef53a02d04e03ba897429">  100</a></span>&#160;<a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#abe045be6c5cef53a02d04e03ba897429">multi_motor_enable_motor</a>(uint8_t motor_id, <span class="keywordtype">bool</span> enable) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span> (motor_id &gt;= <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a> || !<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a9956a84af70db7e2078dd53761f4124a">coordinator_initialized</a>) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756a6ac534e278ae408341dfc83c9d3a063f">ERROR_MOTOR_INVALID_ID</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[motor_id].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a> = enable;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">if</span> (!enable) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="comment">// Disable synchronization and load sharing for disabled motor</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[motor_id].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a9e5b81836f2748ac26bea7e0568b8dc8">synchronized</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[motor_id].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a23ea550c61b9ea0e552c2fbdef23f5bb">load_share_enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#aeb18c9ef40867beb057896ad2fc082bb">  121</a></span>&#160;<a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aeb18c9ef40867beb057896ad2fc082bb">multi_motor_set_mode</a>(<a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551">CoordinationMode_t</a> mode) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a9956a84af70db7e2078dd53761f4124a">coordinator_initialized</a>) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756a1828f808506ac0f1fa7cf7a9a659210d">ERROR_NOT_INITIALIZED</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment">// Stop any active coordinated motion before changing mode</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a8ed53830dd401d583dfff58c8221ff52">active</a>) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a5c32dcb12ad2666fd110d239dff6c1d4">multi_motor_stop_coordinated_motion</a>();</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a942e270d06f2e3abb0b2932fdd0dbe15">mode</a> = mode;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// Configure motors based on mode</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">switch</span> (mode) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a2d856d710cbadcc3be1ff1039782bead">COORDINATION_MODE_INDEPENDENT</a>:</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="comment">// Disable synchronization for all motors</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a9e5b81836f2748ac26bea7e0568b8dc8">synchronized</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a23ea550c61b9ea0e552c2fbdef23f5bb">load_share_enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a34ca6c9a74748253726b3f00636cece0">COORDINATION_MODE_SYNCHRONIZED</a>:</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="comment">// Enable synchronization for all enabled motors</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a9e5b81836f2748ac26bea7e0568b8dc8">synchronized</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a40d76bc7e260c09a6ad4c20c31fb3cc2">COORDINATION_MODE_LOAD_SHARING</a>:</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="comment">// Enable load sharing for all enabled motors</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a23ea550c61b9ea0e552c2fbdef23f5bb">load_share_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a6fe2253c989b5ac3bc164a79bc8f1127">load_config</a>.<a class="code" href="../../d2/dd6/structLoadSharingConfig__t.html#acebd00045ffa71ff70dc47d20578927d">load_balance_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a8d712c58d751b9af5f329b13c848d4dc">COORDINATION_MODE_MASTER_SLAVE</a>: {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="comment">// Set first enabled motor as master, others as slaves</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordtype">bool</span> master_set = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <span class="keywordflow">if</span> (!master_set) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a2a22e347a66aec62040284f717819081">sync_config</a>.<a class="code" href="../../df/d1e/structSynchronizationConfig__t.html#ae448f3653a120cefc18e9bc671296577">sync_master</a> = i;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a9e5b81836f2748ac26bea7e0568b8dc8">synchronized</a> =</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                        <span class="keyword">false</span>; <span class="comment">// Master not synchronized to itself</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                    master_set = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a9e5b81836f2748ac26bea7e0568b8dc8">synchronized</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a></div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#a8e3456d53391d61ac6caa5bf88bc6f42">  190</a></span>&#160;<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a8e3456d53391d61ac6caa5bf88bc6f42">multi_motor_coordinated_move</a>(<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html">CoordinatedMoveCommand_t</a> *move_cmd) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a9956a84af70db7e2078dd53761f4124a">coordinator_initialized</a> || move_cmd == <a class="code" href="../../d1/db4/stm32h7xx__hal__def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756aeae4b12e06d727d085f75f79a820f2e8">ERROR_INVALID_PARAMETER</a>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a8ed53830dd401d583dfff58c8221ff52">active</a>) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a25a4961b677d3c052b2864d20ed6fb04">ERROR_MOTION_ACTIVE</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// Validate move command</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a> result = <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a1da4ec0c4f1b05acdb292be41bdca884">validate_coordinated_move</a>(move_cmd);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">if</span> (result != <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">// Store move command</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    memcpy(&amp;<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a049a8c35c9cf7ff5e1ffe5d91a26295a">current_move</a>, move_cmd,</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;           <span class="keyword">sizeof</span>(<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html">CoordinatedMoveCommand_t</a>));</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">// Execute based on coordination mode</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a942e270d06f2e3abb0b2932fdd0dbe15">mode</a>) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a34ca6c9a74748253726b3f00636cece0">COORDINATION_MODE_SYNCHRONIZED</a>:</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        result = <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a5bba34e842ab4e78a39b66c6e8af80cf">execute_synchronized_move</a>(move_cmd);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a40d76bc7e260c09a6ad4c20c31fb3cc2">COORDINATION_MODE_LOAD_SHARING</a>:</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        result = <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a9feb5cfe9a745afdda3bd228be9a13d1">execute_load_sharing_move</a>(move_cmd);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a8d712c58d751b9af5f329b13c848d4dc">COORDINATION_MODE_MASTER_SLAVE</a>:</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        result = <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#ab381df96f41327f355d96b27f7696eb5">execute_master_slave_move</a>(move_cmd);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a2d856d710cbadcc3be1ff1039782bead">COORDINATION_MODE_INDEPENDENT</a>:</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        result = <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#adebe98cff7eb2071acbdd47131e29025">execute_independent_move</a>(move_cmd);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span> (result == <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a8ed53830dd401d583dfff58c8221ff52">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a4be90e64de15753d11e5bb4191864a15">start_time</a> = <a class="code" href="../../d6/dee/hal__abstraction_8h.html#a38c8c73e78204b0e1248f225a4e0eb50">HAL_Abstraction_GetTick</a>();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#a26f7e79f0fc25d9d8f74362d592dec53">  242</a></span>&#160;<a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a26f7e79f0fc25d9d8f74362d592dec53">multi_motor_update</a>(uint32_t dt_ms) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a9956a84af70db7e2078dd53761f4124a">coordinator_initialized</a>) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756a1828f808506ac0f1fa7cf7a9a659210d">ERROR_NOT_INITIALIZED</a>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// Update motor states</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#ae5acb4f0a2da5035fa6bfde32f265541">update_motor_states</a>();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// Handle coordination based on current mode</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a942e270d06f2e3abb0b2932fdd0dbe15">mode</a>) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a34ca6c9a74748253726b3f00636cece0">COORDINATION_MODE_SYNCHRONIZED</a>:</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a32ad0a18f759c463717fe62d90822702">update_synchronized_motion</a>(dt_ms);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a40d76bc7e260c09a6ad4c20c31fb3cc2">COORDINATION_MODE_LOAD_SHARING</a>:</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a390f343fce9648775d5d538f1fe3198c">update_load_sharing</a>(dt_ms);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a8d712c58d751b9af5f329b13c848d4dc">COORDINATION_MODE_MASTER_SLAVE</a>:</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a074a36721b7021ed5aa29ccb21c6a665">update_master_slave_motion</a>(dt_ms);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a2d856d710cbadcc3be1ff1039782bead">COORDINATION_MODE_INDEPENDENT</a>:</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="comment">// No special coordination needed</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// Check for motion completion</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a8ed53830dd401d583dfff58c8221ff52">active</a>) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a260062f056919b369730b9e23506dd3e">check_motion_completion</a>();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;}</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#a5c32dcb12ad2666fd110d239dff6c1d4">  282</a></span>&#160;<a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a5c32dcb12ad2666fd110d239dff6c1d4">multi_motor_stop_coordinated_motion</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a9956a84af70db7e2078dd53761f4124a">coordinator_initialized</a>) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756a1828f808506ac0f1fa7cf7a9a659210d">ERROR_NOT_INITIALIZED</a>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">// Stop all enabled motors</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <a class="code" href="../../d2/de7/motion__profile_8c.html#a0ce10de39442cda94b1f541d0d8ea16f">motion_profile_stop</a>(i);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a8ed53830dd401d583dfff58c8221ff52">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a73404a4b497634317a7d482b9c118b84">sequence_step</a> = 0;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;}</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#aeba76f3052406f57f89e2b99a131206e">  305</a></span>&#160;<a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aeba76f3052406f57f89e2b99a131206e">multi_motor_get_status</a>(<a class="code" href="../../de/dba/structCoordinationStatus__t.html">CoordinationStatus_t</a> *status) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a9956a84af70db7e2078dd53761f4124a">coordinator_initialized</a> || status == <a class="code" href="../../d1/db4/stm32h7xx__hal__def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756aeae4b12e06d727d085f75f79a820f2e8">ERROR_INVALID_PARAMETER</a>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    status-&gt;<a class="code" href="../../de/dba/structCoordinationStatus__t.html#ae650e037a973b6d5cdd06773442f710f">mode</a> = <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a942e270d06f2e3abb0b2932fdd0dbe15">mode</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    status-&gt;<a class="code" href="../../de/dba/structCoordinationStatus__t.html#a0a9e6829209950f4592646bc809004da">active</a> = <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a8ed53830dd401d583dfff58c8221ff52">active</a>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    status-&gt;<a class="code" href="../../de/dba/structCoordinationStatus__t.html#ae7a96c21738b4c240a33da0670ba472e">sync_master</a> = <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a2a22e347a66aec62040284f717819081">sync_config</a>.<a class="code" href="../../df/d1e/structSynchronizationConfig__t.html#ae448f3653a120cefc18e9bc671296577">sync_master</a>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    status-&gt;<a class="code" href="../../de/dba/structCoordinationStatus__t.html#a4b49c25857da2c61104b1e58d74ac44b">load_balance_enabled</a> =</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a6fe2253c989b5ac3bc164a79bc8f1127">load_config</a>.<a class="code" href="../../d2/dd6/structLoadSharingConfig__t.html#acebd00045ffa71ff70dc47d20578927d">load_balance_enabled</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// Copy motor states</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        status-&gt;<a class="code" href="../../de/dba/structCoordinationStatus__t.html#aa4b07526437ebc92d16bc81da89ab8c9">motor_enabled</a>[i] = <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        status-&gt;<a class="code" href="../../de/dba/structCoordinationStatus__t.html#aec77eddca4be46222cbf95a7afd75f1c">motor_synchronized</a>[i] =</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a9e5b81836f2748ac26bea7e0568b8dc8">synchronized</a>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        status-&gt;<a class="code" href="../../de/dba/structCoordinationStatus__t.html#a010712539b8926fc4f77289222145a77">motor_load_share</a>[i] =</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a23ea550c61b9ea0e552c2fbdef23f5bb">load_share_enabled</a>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="comment">// Get position control status</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <a class="code" href="../../df/d9d/structPositionControlStatus__t.html">PositionControlStatus_t</a> pos_status;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/da4/position__control_8c.html#a420cf63344eb43cb92af724ee1b0d16e">position_control_get_status</a>(i, &amp;pos_status) == <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            status-&gt;<a class="code" href="../../de/dba/structCoordinationStatus__t.html#a9c05537f108a028056bced84b20aba4a">motor_positions</a>[i] = pos_status.<a class="code" href="../../df/d9d/structPositionControlStatus__t.html#a6c9e70952f6e39b019910d177a48d9fb">current_position</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            status-&gt;<a class="code" href="../../de/dba/structCoordinationStatus__t.html#ae1cfce8b941880d0f48ede120f7279e7">motor_settled</a>[i] = pos_status.<a class="code" href="../../df/d9d/structPositionControlStatus__t.html#a61ac4c0eda402996490d78f4340357fc">position_settled</a>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// Calculate synchronization error</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#abfab52c42a0911038bac7087d25251be">calculate_sync_error</a>(status);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#a06aae3089b43181dbd7c1c3cf20b1411">  343</a></span>&#160;<a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a06aae3089b43181dbd7c1c3cf20b1411">multi_motor_configure_sync</a>(<a class="code" href="../../df/d1e/structSynchronizationConfig__t.html">SynchronizationConfig_t</a> *config) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a9956a84af70db7e2078dd53761f4124a">coordinator_initialized</a> || config == <a class="code" href="../../d1/db4/stm32h7xx__hal__def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756aeae4b12e06d727d085f75f79a820f2e8">ERROR_INVALID_PARAMETER</a>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> (config-&gt;<a class="code" href="../../df/d1e/structSynchronizationConfig__t.html#ae448f3653a120cefc18e9bc671296577">sync_master</a> &gt;= <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756a6ac534e278ae408341dfc83c9d3a063f">ERROR_MOTOR_INVALID_ID</a>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    memcpy(&amp;<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a2a22e347a66aec62040284f717819081">sync_config</a>, config, <span class="keyword">sizeof</span>(<a class="code" href="../../df/d1e/structSynchronizationConfig__t.html">SynchronizationConfig_t</a>));</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;}</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#ad56a98793014de31e1e0aee21e5deb99">  362</a></span>&#160;<a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#ad56a98793014de31e1e0aee21e5deb99">multi_motor_configure_load_sharing</a>(<a class="code" href="../../d2/dd6/structLoadSharingConfig__t.html">LoadSharingConfig_t</a> *config) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a9956a84af70db7e2078dd53761f4124a">coordinator_initialized</a> || config == <a class="code" href="../../d1/db4/stm32h7xx__hal__def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756aeae4b12e06d727d085f75f79a820f2e8">ERROR_INVALID_PARAMETER</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    memcpy(&amp;<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a6fe2253c989b5ac3bc164a79bc8f1127">load_config</a>, config, <span class="keyword">sizeof</span>(<a class="code" href="../../d2/dd6/structLoadSharingConfig__t.html">LoadSharingConfig_t</a>));</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;}</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="keyword">static</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a></div>
<div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#a1da4ec0c4f1b05acdb292be41bdca884">  376</a></span>&#160;<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a1da4ec0c4f1b05acdb292be41bdca884">validate_coordinated_move</a>(<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html">CoordinatedMoveCommand_t</a> *move_cmd) {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// Check if any motor is enabled for the move</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordtype">bool</span> any_motor_enabled = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">if</span> (move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#a7f97b7dc799a151c17a65567a5a619da">enabled</a>) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            any_motor_enabled = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="comment">// Validate individual motor parameters</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            <span class="keywordflow">if</span> (abs(move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#af54405fcefbc500fa303fb1dc46f9645">target_position</a>) &gt;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                <a class="code" href="../../d0/dba/position__control_8h.html#a87746b211d4bd81c20bc14be3c39a45a">MAX_POSITION_STEPS</a>) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../d0/dba/position__control_8h.html#adf88ac31c9920b19ec09f4a74de16514">ERROR_POSITION_OUT_OF_RANGE</a>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="keywordflow">if</span> (move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#a9899f0d138d3a1863808e63c191ebfdc">max_velocity</a> &gt; <a class="code" href="../../de/d58/motor__config_8h.html#a28d8a416ec448cfade8aca6ec9a58444">MOTOR_MAX_SPEED</a>) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a3cef481520dfe8ee54d82d5baeba167c">ERROR_VELOCITY_OUT_OF_RANGE</a>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">if</span> (!any_motor_enabled) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a72ecc162a840978c0e130b823a24de64">ERROR_NO_MOTORS_ENABLED</a>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;}</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="keyword">static</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a></div>
<div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#a5bba34e842ab4e78a39b66c6e8af80cf">  406</a></span>&#160;<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a5bba34e842ab4e78a39b66c6e8af80cf">execute_synchronized_move</a>(<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html">CoordinatedMoveCommand_t</a> *move_cmd) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">// Calculate move time based on slowest motor</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    uint32_t max_move_time = 0;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keywordflow">if</span> (move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#a7f97b7dc799a151c17a65567a5a619da">enabled</a> &amp;&amp;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="comment">// Get current position</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <a class="code" href="../../df/d9d/structPositionControlStatus__t.html">PositionControlStatus_t</a> pos_status;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <a class="code" href="../../dc/da4/position__control_8c.html#a420cf63344eb43cb92af724ee1b0d16e">position_control_get_status</a>(i, &amp;pos_status);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="comment">// Calculate distance and time needed</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            int32_t distance = abs(move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#af54405fcefbc500fa303fb1dc46f9645">target_position</a> -</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                                   pos_status.<a class="code" href="../../df/d9d/structPositionControlStatus__t.html#a6c9e70952f6e39b019910d177a48d9fb">current_position</a>);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            uint32_t move_time = <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a17c4a602ba5ade936773ed248c5076c9">calculate_move_time</a>(</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                distance, move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#a9899f0d138d3a1863808e63c191ebfdc">max_velocity</a>,</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#aee39283b5108bd4724e7fd78adf4777a">acceleration</a>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="keywordflow">if</span> (move_time &gt; max_move_time) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                max_move_time = move_time;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">// Create synchronized motion profiles</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">if</span> (move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#a7f97b7dc799a151c17a65567a5a619da">enabled</a> &amp;&amp;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <a class="code" href="../../d2/d2b/structMotionProfile__t.html">MotionProfile_t</a> profile_config = {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                .<a class="code" href="../../d2/d2b/structMotionProfile__t.html#ae142a86f682be8efaeb45026d80f8281">type</a> = <a class="code" href="../../df/d07/motion__profile_8h.html#a94d01efe509c492712d7876314c3aa06ac8cdae509cc99fd6281ba13793109b2e">PROFILE_TRAPEZOIDAL</a>,</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                .start_position = <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a28f3bc71634298e3394feaad796eb35f">current_position</a>,</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                .end_position = move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#af54405fcefbc500fa303fb1dc46f9645">target_position</a>,</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                .max_velocity = move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#a9899f0d138d3a1863808e63c191ebfdc">max_velocity</a>,</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                .acceleration = move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#aee39283b5108bd4724e7fd78adf4777a">acceleration</a>,</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                .direction = (move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#af54405fcefbc500fa303fb1dc46f9645">target_position</a> &gt;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                              <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a28f3bc71634298e3394feaad796eb35f">current_position</a>)</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                                 ? <a class="code" href="../../df/d07/motion__profile_8h.html#a219f8a888533b454e1891464cd48f68d">DIRECTION_FORWARD</a></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                                 : <a class="code" href="../../df/d07/motion__profile_8h.html#a20ac1695bc73475874f6304425755f7e">DIRECTION_BACKWARD</a>};</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a> result = <a class="code" href="../../d2/de7/motion__profile_8c.html#a00b52b6f2fb6684d4e6eca7bc6ecea17">motion_profile_start</a>(i, &amp;profile_config);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">if</span> (result != <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                <span class="comment">// Stop all motors on failure</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a5c32dcb12ad2666fd110d239dff6c1d4">multi_motor_stop_coordinated_motion</a>();</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160; </div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="keyword">static</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a></div>
<div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#a9feb5cfe9a745afdda3bd228be9a13d1">  461</a></span>&#160;<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a9feb5cfe9a745afdda3bd228be9a13d1">execute_load_sharing_move</a>(<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html">CoordinatedMoveCommand_t</a> *move_cmd) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="comment">// Calculate total load and distribute among enabled motors</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    int32_t total_distance = 0;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    uint8_t active_motors = 0;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordflow">if</span> (move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#a7f97b7dc799a151c17a65567a5a619da">enabled</a> &amp;&amp;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <a class="code" href="../../df/d9d/structPositionControlStatus__t.html">PositionControlStatus_t</a> pos_status;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <a class="code" href="../../dc/da4/position__control_8c.html#a420cf63344eb43cb92af724ee1b0d16e">position_control_get_status</a>(i, &amp;pos_status);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            total_distance += abs(move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#af54405fcefbc500fa303fb1dc46f9645">target_position</a> -</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                                  pos_status.<a class="code" href="../../df/d9d/structPositionControlStatus__t.html#a6c9e70952f6e39b019910d177a48d9fb">current_position</a>);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            active_motors++;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">if</span> (active_motors == 0) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a72ecc162a840978c0e130b823a24de64">ERROR_NO_MOTORS_ENABLED</a>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">// Distribute load evenly among motors</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    int32_t load_per_motor = total_distance / active_motors;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">if</span> (move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#a7f97b7dc799a151c17a65567a5a619da">enabled</a> &amp;&amp;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <a class="code" href="../../d2/d2b/structMotionProfile__t.html">MotionProfile_t</a> profile_config;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="comment">// Adjust target based on load sharing</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <a class="code" href="../../df/d9d/structPositionControlStatus__t.html">PositionControlStatus_t</a> pos_status;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <a class="code" href="../../dc/da4/position__control_8c.html#a420cf63344eb43cb92af724ee1b0d16e">position_control_get_status</a>(i, &amp;pos_status);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <span class="comment">// Simple load sharing: each motor moves its share</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            int32_t target_pos =</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                pos_status.<a class="code" href="../../df/d9d/structPositionControlStatus__t.html#a6c9e70952f6e39b019910d177a48d9fb">current_position</a> +</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                (load_per_motor *</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                 ((move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#af54405fcefbc500fa303fb1dc46f9645">target_position</a> &gt;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                   pos_status.<a class="code" href="../../df/d9d/structPositionControlStatus__t.html#a6c9e70952f6e39b019910d177a48d9fb">current_position</a>)</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                      ? 1</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                      : -1));</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            profile_config.<a class="code" href="../../d2/d2b/structMotionProfile__t.html#ae142a86f682be8efaeb45026d80f8281">type</a> = <a class="code" href="../../df/d07/motion__profile_8h.html#a94d01efe509c492712d7876314c3aa06ac8cdae509cc99fd6281ba13793109b2e">PROFILE_TRAPEZOIDAL</a>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            profile_config.<a class="code" href="../../d2/d2b/structMotionProfile__t.html#a64bf0b1749adc094fae6339d123e2b44">start_position</a> = pos_status.<a class="code" href="../../df/d9d/structPositionControlStatus__t.html#a6c9e70952f6e39b019910d177a48d9fb">current_position</a>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            profile_config.<a class="code" href="../../d2/d2b/structMotionProfile__t.html#a0c109fe169a7b3167fa315085838f4cd">end_position</a> = target_pos;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            profile_config.<a class="code" href="../../d2/d2b/structMotionProfile__t.html#a20cef6f2059e8a500dd7b33b7bb55588">max_velocity</a> =</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#a9899f0d138d3a1863808e63c191ebfdc">max_velocity</a>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            profile_config.<a class="code" href="../../d2/d2b/structMotionProfile__t.html#a0d9b9c7918b38a0e4b14163563fbe0ce">acceleration</a> =</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#aee39283b5108bd4724e7fd78adf4777a">acceleration</a>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            profile_config.<a class="code" href="../../d2/d2b/structMotionProfile__t.html#a0bf74a2ba5789723138cfd1307b26110">direction</a> =</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                (target_pos &gt; pos_status.<a class="code" href="../../df/d9d/structPositionControlStatus__t.html#a6c9e70952f6e39b019910d177a48d9fb">current_position</a>)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                    ? <a class="code" href="../../df/d07/motion__profile_8h.html#a219f8a888533b454e1891464cd48f68d">DIRECTION_FORWARD</a></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                    : <a class="code" href="../../df/d07/motion__profile_8h.html#a20ac1695bc73475874f6304425755f7e">DIRECTION_BACKWARD</a>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a> result = <a class="code" href="../../d2/de7/motion__profile_8c.html#a00b52b6f2fb6684d4e6eca7bc6ecea17">motion_profile_start</a>(i, &amp;profile_config);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <span class="keywordflow">if</span> (result != <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a5c32dcb12ad2666fd110d239dff6c1d4">multi_motor_stop_coordinated_motion</a>();</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;}</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="keyword">static</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a></div>
<div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#ab381df96f41327f355d96b27f7696eb5">  530</a></span>&#160;<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#ab381df96f41327f355d96b27f7696eb5">execute_master_slave_move</a>(<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html">CoordinatedMoveCommand_t</a> *move_cmd) {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    uint8_t master_id = <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a2a22e347a66aec62040284f717819081">sync_config</a>.<a class="code" href="../../df/d1e/structSynchronizationConfig__t.html#ae448f3653a120cefc18e9bc671296577">sync_master</a>;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="comment">// Start master motor first</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">if</span> (move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[master_id].<a class="code" href="../../d0/d34/structMotorTarget__t.html#a7f97b7dc799a151c17a65567a5a619da">enabled</a> &amp;&amp;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[master_id].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <a class="code" href="../../d2/d2b/structMotionProfile__t.html">MotionProfile_t</a> master_config = {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            .<a class="code" href="../../d2/d2b/structMotionProfile__t.html#ae142a86f682be8efaeb45026d80f8281">type</a> = <a class="code" href="../../df/d07/motion__profile_8h.html#a94d01efe509c492712d7876314c3aa06ac8cdae509cc99fd6281ba13793109b2e">PROFILE_TRAPEZOIDAL</a>,</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            .start_position =</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[master_id].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a28f3bc71634298e3394feaad796eb35f">current_position</a>,</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            .end_position = move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[master_id].<a class="code" href="../../d0/d34/structMotorTarget__t.html#af54405fcefbc500fa303fb1dc46f9645">target_position</a>,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            .max_velocity = move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[master_id].<a class="code" href="../../d0/d34/structMotorTarget__t.html#a9899f0d138d3a1863808e63c191ebfdc">max_velocity</a>,</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            .acceleration = move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[master_id].<a class="code" href="../../d0/d34/structMotorTarget__t.html#aee39283b5108bd4724e7fd78adf4777a">acceleration</a>,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            .direction = (move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[master_id].<a class="code" href="../../d0/d34/structMotorTarget__t.html#af54405fcefbc500fa303fb1dc46f9645">target_position</a> &gt;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                          <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[master_id].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a28f3bc71634298e3394feaad796eb35f">current_position</a>)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                             ? <a class="code" href="../../df/d07/motion__profile_8h.html#a219f8a888533b454e1891464cd48f68d">DIRECTION_FORWARD</a></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                             : <a class="code" href="../../df/d07/motion__profile_8h.html#a20ac1695bc73475874f6304425755f7e">DIRECTION_BACKWARD</a>};</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a> result = <a class="code" href="../../d2/de7/motion__profile_8c.html#a00b52b6f2fb6684d4e6eca7bc6ecea17">motion_profile_start</a>(master_id, &amp;master_config);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">if</span> (result != <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="comment">// Configure slave motors to follow master</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keywordflow">if</span> (i != master_id &amp;&amp; move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#a7f97b7dc799a151c17a65567a5a619da">enabled</a> &amp;&amp;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            <span class="comment">// Slave motors will be updated in update_master_slave_motion()</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a9786f9bd6f95d6fb805e481bd0d43544">slave_offset</a> =</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#af54405fcefbc500fa303fb1dc46f9645">target_position</a> -</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[master_id].<a class="code" href="../../d0/d34/structMotorTarget__t.html#af54405fcefbc500fa303fb1dc46f9645">target_position</a>;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;}</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="keyword">static</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a></div>
<div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#adebe98cff7eb2071acbdd47131e29025">  572</a></span>&#160;<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#adebe98cff7eb2071acbdd47131e29025">execute_independent_move</a>(<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html">CoordinatedMoveCommand_t</a> *move_cmd) {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">// Start each motor independently</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">if</span> (move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#a7f97b7dc799a151c17a65567a5a619da">enabled</a> &amp;&amp;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <a class="code" href="../../d2/d2b/structMotionProfile__t.html">MotionProfile_t</a> profile_config = {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                .<a class="code" href="../../d2/d2b/structMotionProfile__t.html#ae142a86f682be8efaeb45026d80f8281">type</a> = <a class="code" href="../../df/d07/motion__profile_8h.html#a94d01efe509c492712d7876314c3aa06ac8cdae509cc99fd6281ba13793109b2e">PROFILE_TRAPEZOIDAL</a>,</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                .start_position = <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a28f3bc71634298e3394feaad796eb35f">current_position</a>,</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                .end_position = move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#af54405fcefbc500fa303fb1dc46f9645">target_position</a>,</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                .max_velocity = move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#a9899f0d138d3a1863808e63c191ebfdc">max_velocity</a>,</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                .acceleration = move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#aee39283b5108bd4724e7fd78adf4777a">acceleration</a>,</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                .direction = (move_cmd-&gt;<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#af54405fcefbc500fa303fb1dc46f9645">target_position</a> &gt;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                              <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a28f3bc71634298e3394feaad796eb35f">current_position</a>)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                                 ? <a class="code" href="../../df/d07/motion__profile_8h.html#a219f8a888533b454e1891464cd48f68d">DIRECTION_FORWARD</a></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                                 : <a class="code" href="../../df/d07/motion__profile_8h.html#a20ac1695bc73475874f6304425755f7e">DIRECTION_BACKWARD</a>};</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a> result = <a class="code" href="../../d2/de7/motion__profile_8c.html#a00b52b6f2fb6684d4e6eca7bc6ecea17">motion_profile_start</a>(i, &amp;profile_config);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <span class="keywordflow">if</span> (result != <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                <span class="comment">// Continue with other motors even if one fails</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                <a class="code" href="../../df/d2b/fault__monitor_8h.html#ab9778577bce2d2a4efe52d79b03c0c5d">fault_monitor_report_fault</a>(i, <a class="code" href="../../df/d2b/fault__monitor_8h.html#a892faa01dac880cae1aa3a21d60e1f4c">FAULT_MOTION_PROFILE_FAILED</a>);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;}</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#ae5acb4f0a2da5035fa6bfde32f265541">  602</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#ae5acb4f0a2da5035fa6bfde32f265541">update_motor_states</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            <span class="comment">// Update position and status</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            <a class="code" href="../../df/d9d/structPositionControlStatus__t.html">PositionControlStatus_t</a> pos_status;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dc/da4/position__control_8c.html#a420cf63344eb43cb92af724ee1b0d16e">position_control_get_status</a>(i, &amp;pos_status) == <a class="code" href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a>) {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a28f3bc71634298e3394feaad796eb35f">current_position</a> =</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                    pos_status.<a class="code" href="../../df/d9d/structPositionControlStatus__t.html#a6c9e70952f6e39b019910d177a48d9fb">current_position</a>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a87a5dbb284b3f1fdb7cdbfa2204857ce">settled</a> =</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                    pos_status.<a class="code" href="../../df/d9d/structPositionControlStatus__t.html#a61ac4c0eda402996490d78f4340357fc">position_settled</a>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            <span class="comment">// Update motion profile status</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a78f7e450407131fcbda15a4b38e384d2">profile_active</a> =</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                <a class="code" href="../../d2/de7/motion__profile_8c.html#a80b846f20fe162e676d1cc4e20574199">motion_profile_is_active</a>(i);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;}</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#a32ad0a18f759c463717fe62d90822702">  624</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a32ad0a18f759c463717fe62d90822702">update_synchronized_motion</a>(uint32_t dt_ms) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="comment">// Check synchronization between motors</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a9e5b81836f2748ac26bea7e0568b8dc8">synchronized</a> &amp;&amp;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <span class="comment">// Calculate synchronization error relative to master</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            uint8_t master_id = <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a2a22e347a66aec62040284f717819081">sync_config</a>.<a class="code" href="../../df/d1e/structSynchronizationConfig__t.html#ae448f3653a120cefc18e9bc671296577">sync_master</a>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            int32_t sync_error =</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a28f3bc71634298e3394feaad796eb35f">current_position</a> -</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[master_id].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a28f3bc71634298e3394feaad796eb35f">current_position</a>;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <span class="keywordflow">if</span> (abs(sync_error) &gt; <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a2a22e347a66aec62040284f717819081">sync_config</a>.<a class="code" href="../../df/d1e/structSynchronizationConfig__t.html#a37e5b88528700dfe5ce48bd10db14f41">sync_tolerance</a>) {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <span class="comment">// Report synchronization fault</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                <a class="code" href="../../df/d2b/fault__monitor_8h.html#ab9778577bce2d2a4efe52d79b03c0c5d">fault_monitor_report_fault</a>(i, <a class="code" href="../../df/d2b/fault__monitor_8h.html#ad34b14cb81ece7a622bcc7b9e6d8514f">FAULT_SYNCHRONIZATION_ERROR</a>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;}</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#a390f343fce9648775d5d538f1fe3198c">  646</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a390f343fce9648775d5d538f1fe3198c">update_load_sharing</a>(uint32_t dt_ms) {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a6fe2253c989b5ac3bc164a79bc8f1127">load_config</a>.<a class="code" href="../../d2/dd6/structLoadSharingConfig__t.html#acebd00045ffa71ff70dc47d20578927d">load_balance_enabled</a>) {</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="comment">// Calculate average position of all enabled motors</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    int32_t total_position = 0;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    uint8_t active_motors = 0;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a23ea550c61b9ea0e552c2fbdef23f5bb">load_share_enabled</a> &amp;&amp;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            total_position += <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a28f3bc71634298e3394feaad796eb35f">current_position</a>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            active_motors++;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        }</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">if</span> (active_motors &lt; 2) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="keywordflow">return</span>; <span class="comment">// Need at least 2 motors for load sharing</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    int32_t average_position = total_position / active_motors;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// Adjust motors that are too far from average</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a23ea550c61b9ea0e552c2fbdef23f5bb">load_share_enabled</a> &amp;&amp;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            int32_t position_diff =</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a28f3bc71634298e3394feaad796eb35f">current_position</a> -</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                average_position;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            <span class="keywordflow">if</span> (abs(position_diff) &gt;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a6fe2253c989b5ac3bc164a79bc8f1127">load_config</a>.<a class="code" href="../../d2/dd6/structLoadSharingConfig__t.html#a0f22b4b653d364af1e563ed6c3232589">max_load_difference</a>) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                <span class="comment">// Adjust this motor&#39;s target to balance load</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                int32_t adjustment =</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                    position_diff / 2; <span class="comment">// Move halfway back to average</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                int32_t new_target =</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                    <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a28f3bc71634298e3394feaad796eb35f">current_position</a> - adjustment;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                <a class="code" href="../../dc/da4/position__control_8c.html#a20e9bdf8668ebd21b208c00c9550ca04">position_control_set_target</a>(i, new_target);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;}</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#a074a36721b7021ed5aa29ccb21c6a665">  694</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a074a36721b7021ed5aa29ccb21c6a665">update_master_slave_motion</a>(uint32_t dt_ms) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    uint8_t master_id = <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a2a22e347a66aec62040284f717819081">sync_config</a>.<a class="code" href="../../df/d1e/structSynchronizationConfig__t.html#ae448f3653a120cefc18e9bc671296577">sync_master</a>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[master_id].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    int32_t master_position =</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[master_id].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a28f3bc71634298e3394feaad796eb35f">current_position</a>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">// Update slave motors to follow master</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="keywordflow">if</span> (i != master_id &amp;&amp; <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a9e5b81836f2748ac26bea7e0568b8dc8">synchronized</a> &amp;&amp;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            int32_t slave_target =</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                master_position + <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a9786f9bd6f95d6fb805e481bd0d43544">slave_offset</a>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            <a class="code" href="../../dc/da4/position__control_8c.html#a20e9bdf8668ebd21b208c00c9550ca04">position_control_set_target</a>(i, slave_target);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;}</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#a260062f056919b369730b9e23506dd3e">  718</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a260062f056919b369730b9e23506dd3e">check_motion_completion</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordtype">bool</span> all_settled = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a> &amp;&amp;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#a049a8c35c9cf7ff5e1ffe5d91a26295a">current_move</a>.<a class="code" href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">motor_targets</a>[i].<a class="code" href="../../d0/d34/structMotorTarget__t.html#a7f97b7dc799a151c17a65567a5a619da">enabled</a>) {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a87a5dbb284b3f1fdb7cdbfa2204857ce">settled</a> ||</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#a78f7e450407131fcbda15a4b38e384d2">profile_active</a>) {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                all_settled = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            }</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    }</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">if</span> (all_settled) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a8ed53830dd401d583dfff58c8221ff52">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a73404a4b497634317a7d482b9c118b84">sequence_step</a> = 0;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;}</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00741"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#abfab52c42a0911038bac7087d25251be">  741</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#abfab52c42a0911038bac7087d25251be">calculate_sync_error</a>(<a class="code" href="../../de/dba/structCoordinationStatus__t.html">CoordinationStatus_t</a> *status) {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">motion_state</a>.<a class="code" href="../../d7/d2b/structCoordinatedMotionState__t.html#a942e270d06f2e3abb0b2932fdd0dbe15">mode</a> != <a class="code" href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a34ca6c9a74748253726b3f00636cece0">COORDINATION_MODE_SYNCHRONIZED</a>) {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        status-&gt;<a class="code" href="../../de/dba/structCoordinationStatus__t.html#a7bce60c98811caa698ffeff6fb6011ef">max_sync_error</a> = 0;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    int32_t min_pos = INT32_MAX;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    int32_t max_pos = INT32_MIN;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a>; i++) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a>.<a class="code" href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">motor_states</a>[i].<a class="code" href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">enabled</a>) {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            <span class="keywordflow">if</span> (status-&gt;<a class="code" href="../../de/dba/structCoordinationStatus__t.html#a9c05537f108a028056bced84b20aba4a">motor_positions</a>[i] &lt; min_pos) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                min_pos = status-&gt;<a class="code" href="../../de/dba/structCoordinationStatus__t.html#a9c05537f108a028056bced84b20aba4a">motor_positions</a>[i];</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            <span class="keywordflow">if</span> (status-&gt;<a class="code" href="../../de/dba/structCoordinationStatus__t.html#a9c05537f108a028056bced84b20aba4a">motor_positions</a>[i] &gt; max_pos) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                max_pos = status-&gt;<a class="code" href="../../de/dba/structCoordinationStatus__t.html#a9c05537f108a028056bced84b20aba4a">motor_positions</a>[i];</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    status-&gt;<a class="code" href="../../de/dba/structCoordinationStatus__t.html#a7bce60c98811caa698ffeff6fb6011ef">max_sync_error</a> = max_pos - min_pos;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;}</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno"><a class="line" href="../../d6/d93/multi__motor__coordinator_8c.html#a17c4a602ba5ade936773ed248c5076c9">  767</a></span>&#160;<span class="keyword">static</span> uint32_t <a class="code" href="../../d6/d93/multi__motor__coordinator_8c.html#a17c4a602ba5ade936773ed248c5076c9">calculate_move_time</a>(int32_t distance, uint32_t max_velocity,</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                                    uint32_t acceleration) {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="comment">// Simple trapezoidal profile time calculation</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordtype">float</span> accel_time = (float)max_velocity / (<span class="keywordtype">float</span>)acceleration;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordtype">float</span> accel_distance =</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        0.5f * (float)acceleration * accel_time * accel_time;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160; </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordflow">if</span> (2.0f * accel_distance &gt;= (<span class="keywordtype">float</span>)distance) {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        <span class="comment">// Triangular profile</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="keywordflow">return</span> (uint32_t)(2.0f * sqrtf((<span class="keywordtype">float</span>)distance / (<span class="keywordtype">float</span>)acceleration) *</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                          1000.0f);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="comment">// Trapezoidal profile</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <span class="keywordtype">float</span> constant_distance = (float)distance - 2.0f * accel_distance;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="keywordtype">float</span> constant_time = constant_distance / (float)max_velocity;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="keywordflow">return</span> (uint32_t)((2.0f * accel_time + constant_time) * 1000.0f);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    }</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;}</div>
<div class="ttc" id="aerror__codes_8h_html_ad18804b039d93258aac27507b1ad3756"><div class="ttname"><a href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756">SystemError_t</a></div><div class="ttdeci">SystemError_t</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/error__codes_8h_source.html#l00048">error_codes.h:48</a></div></div>
<div class="ttc" id="aerror__codes_8h_html_ad18804b039d93258aac27507b1ad3756a1828f808506ac0f1fa7cf7a9a659210d"><div class="ttname"><a href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756a1828f808506ac0f1fa7cf7a9a659210d">ERROR_NOT_INITIALIZED</a></div><div class="ttdeci">@ ERROR_NOT_INITIALIZED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/error__codes_8h_source.html#l00060">error_codes.h:60</a></div></div>
<div class="ttc" id="aerror__codes_8h_html_ad18804b039d93258aac27507b1ad3756a6ac534e278ae408341dfc83c9d3a063f"><div class="ttname"><a href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756a6ac534e278ae408341dfc83c9d3a063f">ERROR_MOTOR_INVALID_ID</a></div><div class="ttdeci">@ ERROR_MOTOR_INVALID_ID</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/error__codes_8h_source.html#l00105">error_codes.h:105</a></div></div>
<div class="ttc" id="aerror__codes_8h_html_ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70"><div class="ttname"><a href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756abf6cd78c882f75ba696b76d0c77e3e70">SYSTEM_OK</a></div><div class="ttdeci">@ SYSTEM_OK</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/error__codes_8h_source.html#l00050">error_codes.h:50</a></div></div>
<div class="ttc" id="aerror__codes_8h_html_ad18804b039d93258aac27507b1ad3756aeae4b12e06d727d085f75f79a820f2e8"><div class="ttname"><a href="../../de/d11/error__codes_8h.html#ad18804b039d93258aac27507b1ad3756aeae4b12e06d727d085f75f79a820f2e8">ERROR_INVALID_PARAMETER</a></div><div class="ttdeci">@ ERROR_INVALID_PARAMETER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/error__codes_8h_source.html#l00055">error_codes.h:54</a></div></div>
<div class="ttc" id="afault__monitor_8h_html"><div class="ttname"><a href="../../df/d2b/fault__monitor_8h.html">fault_monitor.h</a></div><div class="ttdoc">Fault Detection and Monitoring System Interface - STM32H753ZI Stepper Motor Project.</div></div>
<div class="ttc" id="afault__monitor_8h_html_a892faa01dac880cae1aa3a21d60e1f4c"><div class="ttname"><a href="../../df/d2b/fault__monitor_8h.html#a892faa01dac880cae1aa3a21d60e1f4c">FAULT_MOTION_PROFILE_FAILED</a></div><div class="ttdeci">#define FAULT_MOTION_PROFILE_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2b/fault__monitor_8h_source.html#l00174">fault_monitor.h:174</a></div></div>
<div class="ttc" id="afault__monitor_8h_html_ab9778577bce2d2a4efe52d79b03c0c5d"><div class="ttname"><a href="../../df/d2b/fault__monitor_8h.html#ab9778577bce2d2a4efe52d79b03c0c5d">fault_monitor_report_fault</a></div><div class="ttdeci">SystemError_t fault_monitor_report_fault(uint8_t motor_id, MotorFaultType_t fault_type)</div><div class="ttdoc">Report a motor fault (convenience wrapper)</div></div>
<div class="ttc" id="afault__monitor_8h_html_ad34b14cb81ece7a622bcc7b9e6d8514f"><div class="ttname"><a href="../../df/d2b/fault__monitor_8h.html#ad34b14cb81ece7a622bcc7b9e6d8514f">FAULT_SYNCHRONIZATION_ERROR</a></div><div class="ttdeci">#define FAULT_SYNCHRONIZATION_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2b/fault__monitor_8h_source.html#l00175">fault_monitor.h:175</a></div></div>
<div class="ttc" id="ahal__abstraction_8h_html"><div class="ttname"><a href="../../d6/dee/hal__abstraction_8h.html">hal_abstraction.h</a></div><div class="ttdoc">Hardware Abstraction Layer (HAL) Interface for STM32H753ZI.</div></div>
<div class="ttc" id="ahal__abstraction_8h_html_a38c8c73e78204b0e1248f225a4e0eb50"><div class="ttname"><a href="../../d6/dee/hal__abstraction_8h.html#a38c8c73e78204b0e1248f225a4e0eb50">HAL_Abstraction_GetTick</a></div><div class="ttdeci">uint32_t HAL_Abstraction_GetTick(void)</div><div class="ttdoc">Get system tick count in milliseconds.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d49/hal__abstraction__stm32h7_8c_source.html#l00532">hal_abstraction_stm32h7.c:532</a></div></div>
<div class="ttc" id="amotion__profile_8c_html_a00b52b6f2fb6684d4e6eca7bc6ecea17"><div class="ttname"><a href="../../d2/de7/motion__profile_8c.html#a00b52b6f2fb6684d4e6eca7bc6ecea17">motion_profile_start</a></div><div class="ttdeci">SystemError_t motion_profile_start(uint8_t motor_id, MotionProfile_t *profile)</div><div class="ttdoc">Start motion profile for specified motor.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/de7/motion__profile_8c_source.html#l00339">motion_profile.c:339</a></div></div>
<div class="ttc" id="amotion__profile_8c_html_a0ce10de39442cda94b1f541d0d8ea16f"><div class="ttname"><a href="../../d2/de7/motion__profile_8c.html#a0ce10de39442cda94b1f541d0d8ea16f">motion_profile_stop</a></div><div class="ttdeci">SystemError_t motion_profile_stop(uint8_t motor_id)</div><div class="ttdoc">Stop motion profile for specified motor.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/de7/motion__profile_8c_source.html#l00360">motion_profile.c:360</a></div></div>
<div class="ttc" id="amotion__profile_8c_html_a80b846f20fe162e676d1cc4e20574199"><div class="ttname"><a href="../../d2/de7/motion__profile_8c.html#a80b846f20fe162e676d1cc4e20574199">motion_profile_is_active</a></div><div class="ttdeci">bool motion_profile_is_active(uint8_t motor_id)</div><div class="ttdoc">Check if motion profile is active for motor.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/de7/motion__profile_8c_source.html#l00374">motion_profile.c:374</a></div></div>
<div class="ttc" id="amotion__profile_8h_html"><div class="ttname"><a href="../../df/d07/motion__profile_8h.html">motion_profile.h</a></div><div class="ttdoc">Advanced Motion Profiling Header for STM32H753ZI Motor Control.</div></div>
<div class="ttc" id="amotion__profile_8h_html_a20ac1695bc73475874f6304425755f7e"><div class="ttname"><a href="../../df/d07/motion__profile_8h.html#a20ac1695bc73475874f6304425755f7e">DIRECTION_BACKWARD</a></div><div class="ttdeci">#define DIRECTION_BACKWARD</div><div class="ttdoc">Backward direction.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/motion__profile_8h_source.html#l00054">motion_profile.h:54</a></div></div>
<div class="ttc" id="amotion__profile_8h_html_a219f8a888533b454e1891464cd48f68d"><div class="ttname"><a href="../../df/d07/motion__profile_8h.html#a219f8a888533b454e1891464cd48f68d">DIRECTION_FORWARD</a></div><div class="ttdeci">#define DIRECTION_FORWARD</div><div class="ttdoc">Motion direction constants.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/motion__profile_8h_source.html#l00053">motion_profile.h:53</a></div></div>
<div class="ttc" id="amotion__profile_8h_html_a94d01efe509c492712d7876314c3aa06ac8cdae509cc99fd6281ba13793109b2e"><div class="ttname"><a href="../../df/d07/motion__profile_8h.html#a94d01efe509c492712d7876314c3aa06ac8cdae509cc99fd6281ba13793109b2e">PROFILE_TRAPEZOIDAL</a></div><div class="ttdeci">@ PROFILE_TRAPEZOIDAL</div><div class="ttdoc">Standard trapezoidal velocity profile.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/motion__profile_8h_source.html#l00026">motion_profile.h:26</a></div></div>
<div class="ttc" id="amotor__config_8h_html"><div class="ttname"><a href="../../de/d58/motor__config_8h.html">motor_config.h</a></div><div class="ttdoc">Motor and L6470 Driver Configuration - Single Source of Truth (SSOT)</div></div>
<div class="ttc" id="amotor__config_8h_html_a28d8a416ec448cfade8aca6ec9a58444"><div class="ttname"><a href="../../de/d58/motor__config_8h.html#a28d8a416ec448cfade8aca6ec9a58444">MOTOR_MAX_SPEED</a></div><div class="ttdeci">#define MOTOR_MAX_SPEED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d58/motor__config_8h_source.html#l00181">motor_config.h:181</a></div></div>
<div class="ttc" id="amotor__config_8h_html_a40dfd7fdfce455ce507bf3fed368c2ed"><div class="ttname"><a href="../../de/d58/motor__config_8h.html#a40dfd7fdfce455ce507bf3fed368c2ed">MAX_MOTORS</a></div><div class="ttdeci">#define MAX_MOTORS</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d58/motor__config_8h_source.html#l00026">motor_config.h:26</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_a06aae3089b43181dbd7c1c3cf20b1411"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#a06aae3089b43181dbd7c1c3cf20b1411">multi_motor_configure_sync</a></div><div class="ttdeci">SystemError_t multi_motor_configure_sync(SynchronizationConfig_t *config)</div><div class="ttdoc">Configure synchronization parameters.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00343">multi_motor_coordinator.c:343</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_a074a36721b7021ed5aa29ccb21c6a665"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#a074a36721b7021ed5aa29ccb21c6a665">update_master_slave_motion</a></div><div class="ttdeci">static void update_master_slave_motion(uint32_t dt_ms)</div><div class="ttdoc">Update master-slave motion.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00694">multi_motor_coordinator.c:694</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_a17c4a602ba5ade936773ed248c5076c9"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#a17c4a602ba5ade936773ed248c5076c9">calculate_move_time</a></div><div class="ttdeci">static uint32_t calculate_move_time(int32_t distance, uint32_t max_velocity, uint32_t acceleration)</div><div class="ttdoc">Calculate move time for given parameters.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00767">multi_motor_coordinator.c:767</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_a1da4ec0c4f1b05acdb292be41bdca884"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#a1da4ec0c4f1b05acdb292be41bdca884">validate_coordinated_move</a></div><div class="ttdeci">static SystemError_t validate_coordinated_move(CoordinatedMoveCommand_t *move_cmd)</div><div class="ttdoc">Validate coordinated move command.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00376">multi_motor_coordinator.c:376</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_a260062f056919b369730b9e23506dd3e"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#a260062f056919b369730b9e23506dd3e">check_motion_completion</a></div><div class="ttdeci">static void check_motion_completion(void)</div><div class="ttdoc">Check for motion completion.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00718">multi_motor_coordinator.c:718</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_a26f7e79f0fc25d9d8f74362d592dec53"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#a26f7e79f0fc25d9d8f74362d592dec53">multi_motor_update</a></div><div class="ttdeci">SystemError_t multi_motor_update(uint32_t dt_ms)</div><div class="ttdoc">Update coordination system (call from main control loop)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00242">multi_motor_coordinator.c:242</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_a32ad0a18f759c463717fe62d90822702"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#a32ad0a18f759c463717fe62d90822702">update_synchronized_motion</a></div><div class="ttdeci">static void update_synchronized_motion(uint32_t dt_ms)</div><div class="ttdoc">Update synchronized motion.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00624">multi_motor_coordinator.c:624</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_a390f343fce9648775d5d538f1fe3198c"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#a390f343fce9648775d5d538f1fe3198c">update_load_sharing</a></div><div class="ttdeci">static void update_load_sharing(uint32_t dt_ms)</div><div class="ttdoc">Update load sharing.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00646">multi_motor_coordinator.c:646</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_a5bba34e842ab4e78a39b66c6e8af80cf"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#a5bba34e842ab4e78a39b66c6e8af80cf">execute_synchronized_move</a></div><div class="ttdeci">static SystemError_t execute_synchronized_move(CoordinatedMoveCommand_t *move_cmd)</div><div class="ttdoc">Execute synchronized move.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00406">multi_motor_coordinator.c:406</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_a5c32dcb12ad2666fd110d239dff6c1d4"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#a5c32dcb12ad2666fd110d239dff6c1d4">multi_motor_stop_coordinated_motion</a></div><div class="ttdeci">SystemError_t multi_motor_stop_coordinated_motion(void)</div><div class="ttdoc">Stop all coordinated motion.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00282">multi_motor_coordinator.c:282</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_a5fb5fa877f2673a9660118746f9672e9"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#a5fb5fa877f2673a9660118746f9672e9">multi_motor_init</a></div><div class="ttdeci">SystemError_t multi_motor_init(void)</div><div class="ttdoc">Initialize multi-motor coordination system.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00061">multi_motor_coordinator.c:61</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_a8e3456d53391d61ac6caa5bf88bc6f42"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#a8e3456d53391d61ac6caa5bf88bc6f42">multi_motor_coordinated_move</a></div><div class="ttdeci">SystemError_t multi_motor_coordinated_move(CoordinatedMoveCommand_t *move_cmd)</div><div class="ttdoc">Execute coordinated move command.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00190">multi_motor_coordinator.c:190</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_a9956a84af70db7e2078dd53761f4124a"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#a9956a84af70db7e2078dd53761f4124a">coordinator_initialized</a></div><div class="ttdeci">static bool coordinator_initialized</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00055">multi_motor_coordinator.c:55</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_a9feb5cfe9a745afdda3bd228be9a13d1"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#a9feb5cfe9a745afdda3bd228be9a13d1">execute_load_sharing_move</a></div><div class="ttdeci">static SystemError_t execute_load_sharing_move(CoordinatedMoveCommand_t *move_cmd)</div><div class="ttdoc">Execute load sharing move.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00461">multi_motor_coordinator.c:461</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_ab381df96f41327f355d96b27f7696eb5"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#ab381df96f41327f355d96b27f7696eb5">execute_master_slave_move</a></div><div class="ttdeci">static SystemError_t execute_master_slave_move(CoordinatedMoveCommand_t *move_cmd)</div><div class="ttdoc">Execute master-slave move.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00530">multi_motor_coordinator.c:530</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_abe045be6c5cef53a02d04e03ba897429"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#abe045be6c5cef53a02d04e03ba897429">multi_motor_enable_motor</a></div><div class="ttdeci">SystemError_t multi_motor_enable_motor(uint8_t motor_id, bool enable)</div><div class="ttdoc">Enable motor in coordination system.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00100">multi_motor_coordinator.c:100</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_abfab52c42a0911038bac7087d25251be"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#abfab52c42a0911038bac7087d25251be">calculate_sync_error</a></div><div class="ttdeci">static void calculate_sync_error(CoordinationStatus_t *status)</div><div class="ttdoc">Calculate synchronization error.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00741">multi_motor_coordinator.c:741</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_ad56a98793014de31e1e0aee21e5deb99"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#ad56a98793014de31e1e0aee21e5deb99">multi_motor_configure_load_sharing</a></div><div class="ttdeci">SystemError_t multi_motor_configure_load_sharing(LoadSharingConfig_t *config)</div><div class="ttdoc">Configure load sharing parameters.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00362">multi_motor_coordinator.c:362</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_adebe98cff7eb2071acbdd47131e29025"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#adebe98cff7eb2071acbdd47131e29025">execute_independent_move</a></div><div class="ttdeci">static SystemError_t execute_independent_move(CoordinatedMoveCommand_t *move_cmd)</div><div class="ttdoc">Execute independent move.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00572">multi_motor_coordinator.c:572</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_ae5acb4f0a2da5035fa6bfde32f265541"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#ae5acb4f0a2da5035fa6bfde32f265541">update_motor_states</a></div><div class="ttdeci">static void update_motor_states(void)</div><div class="ttdoc">Update motor states.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00602">multi_motor_coordinator.c:602</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_aeb18c9ef40867beb057896ad2fc082bb"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#aeb18c9ef40867beb057896ad2fc082bb">multi_motor_set_mode</a></div><div class="ttdeci">SystemError_t multi_motor_set_mode(CoordinationMode_t mode)</div><div class="ttdoc">Set coordination mode.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00121">multi_motor_coordinator.c:121</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_aeba76f3052406f57f89e2b99a131206e"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#aeba76f3052406f57f89e2b99a131206e">multi_motor_get_status</a></div><div class="ttdeci">SystemError_t multi_motor_get_status(CoordinationStatus_t *status)</div><div class="ttdoc">Get coordination system status.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00305">multi_motor_coordinator.c:305</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8c_html_aebd278be64670010a60e7d2b49cf87e2"><div class="ttname"><a href="../../d6/d93/multi__motor__coordinator_8c.html#aebd278be64670010a60e7d2b49cf87e2">coordinator</a></div><div class="ttdeci">static MultiMotorCoordinator_t coordinator</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d93/multi__motor__coordinator_8c_source.html#l00054">multi_motor_coordinator.c:54</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8h_html"><div class="ttname"><a href="../../d5/d1f/multi__motor__coordinator_8h.html">multi_motor_coordinator.h</a></div><div class="ttdoc">Multi-Motor Coordination and Synchronization System - Header.</div></div>
<div class="ttc" id="amulti__motor__coordinator_8h_html_a224fd3fee0cc1fab48a84a6593fc0658"><div class="ttname"><a href="../../d5/d1f/multi__motor__coordinator_8h.html#a224fd3fee0cc1fab48a84a6593fc0658">MAX_SYNC_WAIT_MS</a></div><div class="ttdeci">#define MAX_SYNC_WAIT_MS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00022">multi_motor_coordinator.h:22</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8h_html_a25a4961b677d3c052b2864d20ed6fb04"><div class="ttname"><a href="../../d5/d1f/multi__motor__coordinator_8h.html#a25a4961b677d3c052b2864d20ed6fb04">ERROR_MOTION_ACTIVE</a></div><div class="ttdeci">#define ERROR_MOTION_ACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00027">multi_motor_coordinator.h:27</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8h_html_a3cef481520dfe8ee54d82d5baeba167c"><div class="ttname"><a href="../../d5/d1f/multi__motor__coordinator_8h.html#a3cef481520dfe8ee54d82d5baeba167c">ERROR_VELOCITY_OUT_OF_RANGE</a></div><div class="ttdeci">#define ERROR_VELOCITY_OUT_OF_RANGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00031">multi_motor_coordinator.h:31</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8h_html_a3ed5e918cd9246d587db67103931da66"><div class="ttname"><a href="../../d5/d1f/multi__motor__coordinator_8h.html#a3ed5e918cd9246d587db67103931da66">MAX_LOAD_DIFFERENCE</a></div><div class="ttdeci">#define MAX_LOAD_DIFFERENCE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00024">multi_motor_coordinator.h:24</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8h_html_a4cdeda5cb0f27aeeb704a12a224cc4d0"><div class="ttname"><a href="../../d5/d1f/multi__motor__coordinator_8h.html#a4cdeda5cb0f27aeeb704a12a224cc4d0">SYNC_TOLERANCE_DEFAULT</a></div><div class="ttdeci">#define SYNC_TOLERANCE_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00021">multi_motor_coordinator.h:21</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8h_html_a4da900d0b48514cd52db0a1414c61551"><div class="ttname"><a href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551">CoordinationMode_t</a></div><div class="ttdeci">CoordinationMode_t</div><div class="ttdoc">Coordination modes enumeration.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00036">multi_motor_coordinator.h:36</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8h_html_a4da900d0b48514cd52db0a1414c61551a2d856d710cbadcc3be1ff1039782bead"><div class="ttname"><a href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a2d856d710cbadcc3be1ff1039782bead">COORDINATION_MODE_INDEPENDENT</a></div><div class="ttdeci">@ COORDINATION_MODE_INDEPENDENT</div><div class="ttdoc">Motors operate independently.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00037">multi_motor_coordinator.h:37</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8h_html_a4da900d0b48514cd52db0a1414c61551a34ca6c9a74748253726b3f00636cece0"><div class="ttname"><a href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a34ca6c9a74748253726b3f00636cece0">COORDINATION_MODE_SYNCHRONIZED</a></div><div class="ttdeci">@ COORDINATION_MODE_SYNCHRONIZED</div><div class="ttdoc">Motors move in synchronized fashion.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00038">multi_motor_coordinator.h:38</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8h_html_a4da900d0b48514cd52db0a1414c61551a40d76bc7e260c09a6ad4c20c31fb3cc2"><div class="ttname"><a href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a40d76bc7e260c09a6ad4c20c31fb3cc2">COORDINATION_MODE_LOAD_SHARING</a></div><div class="ttdeci">@ COORDINATION_MODE_LOAD_SHARING</div><div class="ttdoc">Motors share load equally.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00039">multi_motor_coordinator.h:39</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8h_html_a4da900d0b48514cd52db0a1414c61551a8d712c58d751b9af5f329b13c848d4dc"><div class="ttname"><a href="../../d5/d1f/multi__motor__coordinator_8h.html#a4da900d0b48514cd52db0a1414c61551a8d712c58d751b9af5f329b13c848d4dc">COORDINATION_MODE_MASTER_SLAVE</a></div><div class="ttdeci">@ COORDINATION_MODE_MASTER_SLAVE</div><div class="ttdoc">One master, others follow.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00041">multi_motor_coordinator.h:40</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8h_html_a72ecc162a840978c0e130b823a24de64"><div class="ttname"><a href="../../d5/d1f/multi__motor__coordinator_8h.html#a72ecc162a840978c0e130b823a24de64">ERROR_NO_MOTORS_ENABLED</a></div><div class="ttdeci">#define ERROR_NO_MOTORS_ENABLED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00028">multi_motor_coordinator.h:28</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8h_html_a80c27bccd4159b81da3cb85391034c28"><div class="ttname"><a href="../../d5/d1f/multi__motor__coordinator_8h.html#a80c27bccd4159b81da3cb85391034c28">LOAD_BALANCE_THRESHOLD</a></div><div class="ttdeci">#define LOAD_BALANCE_THRESHOLD</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00023">multi_motor_coordinator.h:23</a></div></div>
<div class="ttc" id="amulti__motor__coordinator_8h_html_a83aec0733039ab5ec2db733323030088adde78f85dedeaa4bd51de44cfe351ea2"><div class="ttname"><a href="../../d5/d1f/multi__motor__coordinator_8h.html#a83aec0733039ab5ec2db733323030088adde78f85dedeaa4bd51de44cfe351ea2">MOTOR_PRIORITY_NORMAL</a></div><div class="ttdeci">@ MOTOR_PRIORITY_NORMAL</div><div class="ttdoc">Normal priority motor.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00048">multi_motor_coordinator.h:48</a></div></div>
<div class="ttc" id="aposition__control_8c_html_a20e9bdf8668ebd21b208c00c9550ca04"><div class="ttname"><a href="../../dc/da4/position__control_8c.html#a20e9bdf8668ebd21b208c00c9550ca04">position_control_set_target</a></div><div class="ttdeci">SystemError_t position_control_set_target(uint8_t motor_id, int32_t target_position)</div><div class="ttdoc">Set target position for motor.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da4/position__control_8c_source.html#l00210">position_control.c:210</a></div></div>
<div class="ttc" id="aposition__control_8c_html_a420cf63344eb43cb92af724ee1b0d16e"><div class="ttname"><a href="../../dc/da4/position__control_8c.html#a420cf63344eb43cb92af724ee1b0d16e">position_control_get_status</a></div><div class="ttdeci">SystemError_t position_control_get_status(uint8_t motor_id, PositionControlStatus_t *status)</div><div class="ttdoc">Get position control status.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da4/position__control_8c_source.html#l00312">position_control.c:312</a></div></div>
<div class="ttc" id="aposition__control_8h_html"><div class="ttname"><a href="../../d0/dba/position__control_8h.html">position_control.h</a></div><div class="ttdoc">Advanced Position Control with Encoder Feedback - Header.</div></div>
<div class="ttc" id="aposition__control_8h_html_a87746b211d4bd81c20bc14be3c39a45a"><div class="ttname"><a href="../../d0/dba/position__control_8h.html#a87746b211d4bd81c20bc14be3c39a45a">MAX_POSITION_STEPS</a></div><div class="ttdeci">#define MAX_POSITION_STEPS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dba/position__control_8h_source.html#l00023">position_control.h:23</a></div></div>
<div class="ttc" id="aposition__control_8h_html_adf88ac31c9920b19ec09f4a74de16514"><div class="ttname"><a href="../../d0/dba/position__control_8h.html#adf88ac31c9920b19ec09f4a74de16514">ERROR_POSITION_OUT_OF_RANGE</a></div><div class="ttdeci">#define ERROR_POSITION_OUT_OF_RANGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dba/position__control_8h_source.html#l00041">position_control.h:41</a></div></div>
<div class="ttc" id="asafety__config_8h_html"><div class="ttname"><a href="../../d3/d5c/safety__config_8h.html">safety_config.h</a></div><div class="ttdoc">Safety Configuration - Single Source of Truth (SSOT)</div></div>
<div class="ttc" id="astm32h7xx__hal__def_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d1/db4/stm32h7xx__hal__def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db4/stm32h7xx__hal__def_8h_source.html#l00021">stm32h7xx_hal_def.h:21</a></div></div>
<div class="ttc" id="astructCoordinatedMotionState__t_html_a4be90e64de15753d11e5bb4191864a15"><div class="ttname"><a href="../../d7/d2b/structCoordinatedMotionState__t.html#a4be90e64de15753d11e5bb4191864a15">CoordinatedMotionState_t::start_time</a></div><div class="ttdeci">uint32_t start_time</div><div class="ttdoc">Motion start timestamp.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00114">multi_motor_coordinator.h:114</a></div></div>
<div class="ttc" id="astructCoordinatedMotionState__t_html_a73404a4b497634317a7d482b9c118b84"><div class="ttname"><a href="../../d7/d2b/structCoordinatedMotionState__t.html#a73404a4b497634317a7d482b9c118b84">CoordinatedMotionState_t::sequence_step</a></div><div class="ttdeci">uint8_t sequence_step</div><div class="ttdoc">Current sequence step.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00115">multi_motor_coordinator.h:115</a></div></div>
<div class="ttc" id="astructCoordinatedMotionState__t_html_a8ed53830dd401d583dfff58c8221ff52"><div class="ttname"><a href="../../d7/d2b/structCoordinatedMotionState__t.html#a8ed53830dd401d583dfff58c8221ff52">CoordinatedMotionState_t::active</a></div><div class="ttdeci">bool active</div><div class="ttdoc">Coordinated motion active.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00113">multi_motor_coordinator.h:113</a></div></div>
<div class="ttc" id="astructCoordinatedMotionState__t_html_a942e270d06f2e3abb0b2932fdd0dbe15"><div class="ttname"><a href="../../d7/d2b/structCoordinatedMotionState__t.html#a942e270d06f2e3abb0b2932fdd0dbe15">CoordinatedMotionState_t::mode</a></div><div class="ttdeci">CoordinationMode_t mode</div><div class="ttdoc">Current coordination mode.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00112">multi_motor_coordinator.h:112</a></div></div>
<div class="ttc" id="astructCoordinatedMoveCommand__t_html"><div class="ttname"><a href="../../d7/da6/structCoordinatedMoveCommand__t.html">CoordinatedMoveCommand_t</a></div><div class="ttdoc">Coordinated move command structure.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00066">multi_motor_coordinator.h:66</a></div></div>
<div class="ttc" id="astructCoordinatedMoveCommand__t_html_a37218bcf08ceb4e10b4553e7de4b590f"><div class="ttname"><a href="../../d7/da6/structCoordinatedMoveCommand__t.html#a37218bcf08ceb4e10b4553e7de4b590f">CoordinatedMoveCommand_t::motor_targets</a></div><div class="ttdeci">MotorTarget_t motor_targets[MAX_MOTORS]</div><div class="ttdoc">Individual motor targets.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00067">multi_motor_coordinator.h:67</a></div></div>
<div class="ttc" id="astructCoordinationStatus__t_html"><div class="ttname"><a href="../../de/dba/structCoordinationStatus__t.html">CoordinationStatus_t</a></div><div class="ttdoc">Coordination status structure.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00133">multi_motor_coordinator.h:133</a></div></div>
<div class="ttc" id="astructCoordinationStatus__t_html_a010712539b8926fc4f77289222145a77"><div class="ttname"><a href="../../de/dba/structCoordinationStatus__t.html#a010712539b8926fc4f77289222145a77">CoordinationStatus_t::motor_load_share</a></div><div class="ttdeci">bool motor_load_share[MAX_MOTORS]</div><div class="ttdoc">Motor load share status.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00140">multi_motor_coordinator.h:140</a></div></div>
<div class="ttc" id="astructCoordinationStatus__t_html_a0a9e6829209950f4592646bc809004da"><div class="ttname"><a href="../../de/dba/structCoordinationStatus__t.html#a0a9e6829209950f4592646bc809004da">CoordinationStatus_t::active</a></div><div class="ttdeci">bool active</div><div class="ttdoc">Coordinated motion active.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00135">multi_motor_coordinator.h:135</a></div></div>
<div class="ttc" id="astructCoordinationStatus__t_html_a4b49c25857da2c61104b1e58d74ac44b"><div class="ttname"><a href="../../de/dba/structCoordinationStatus__t.html#a4b49c25857da2c61104b1e58d74ac44b">CoordinationStatus_t::load_balance_enabled</a></div><div class="ttdeci">bool load_balance_enabled</div><div class="ttdoc">Load balancing status.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00137">multi_motor_coordinator.h:137</a></div></div>
<div class="ttc" id="astructCoordinationStatus__t_html_a7bce60c98811caa698ffeff6fb6011ef"><div class="ttname"><a href="../../de/dba/structCoordinationStatus__t.html#a7bce60c98811caa698ffeff6fb6011ef">CoordinationStatus_t::max_sync_error</a></div><div class="ttdeci">int32_t max_sync_error</div><div class="ttdoc">Maximum synchronization error.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00143">multi_motor_coordinator.h:143</a></div></div>
<div class="ttc" id="astructCoordinationStatus__t_html_a9c05537f108a028056bced84b20aba4a"><div class="ttname"><a href="../../de/dba/structCoordinationStatus__t.html#a9c05537f108a028056bced84b20aba4a">CoordinationStatus_t::motor_positions</a></div><div class="ttdeci">int32_t motor_positions[MAX_MOTORS]</div><div class="ttdoc">Current motor positions.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00141">multi_motor_coordinator.h:141</a></div></div>
<div class="ttc" id="astructCoordinationStatus__t_html_aa4b07526437ebc92d16bc81da89ab8c9"><div class="ttname"><a href="../../de/dba/structCoordinationStatus__t.html#aa4b07526437ebc92d16bc81da89ab8c9">CoordinationStatus_t::motor_enabled</a></div><div class="ttdeci">bool motor_enabled[MAX_MOTORS]</div><div class="ttdoc">Motor enabled status.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00138">multi_motor_coordinator.h:138</a></div></div>
<div class="ttc" id="astructCoordinationStatus__t_html_ae1cfce8b941880d0f48ede120f7279e7"><div class="ttname"><a href="../../de/dba/structCoordinationStatus__t.html#ae1cfce8b941880d0f48ede120f7279e7">CoordinationStatus_t::motor_settled</a></div><div class="ttdeci">bool motor_settled[MAX_MOTORS]</div><div class="ttdoc">Motor settled status.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00142">multi_motor_coordinator.h:142</a></div></div>
<div class="ttc" id="astructCoordinationStatus__t_html_ae650e037a973b6d5cdd06773442f710f"><div class="ttname"><a href="../../de/dba/structCoordinationStatus__t.html#ae650e037a973b6d5cdd06773442f710f">CoordinationStatus_t::mode</a></div><div class="ttdeci">CoordinationMode_t mode</div><div class="ttdoc">Current coordination mode.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00134">multi_motor_coordinator.h:134</a></div></div>
<div class="ttc" id="astructCoordinationStatus__t_html_ae7a96c21738b4c240a33da0670ba472e"><div class="ttname"><a href="../../de/dba/structCoordinationStatus__t.html#ae7a96c21738b4c240a33da0670ba472e">CoordinationStatus_t::sync_master</a></div><div class="ttdeci">uint8_t sync_master</div><div class="ttdoc">Current sync master.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00136">multi_motor_coordinator.h:136</a></div></div>
<div class="ttc" id="astructCoordinationStatus__t_html_aec77eddca4be46222cbf95a7afd75f1c"><div class="ttname"><a href="../../de/dba/structCoordinationStatus__t.html#aec77eddca4be46222cbf95a7afd75f1c">CoordinationStatus_t::motor_synchronized</a></div><div class="ttdeci">bool motor_synchronized[MAX_MOTORS]</div><div class="ttdoc">Motor sync status.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00139">multi_motor_coordinator.h:139</a></div></div>
<div class="ttc" id="astructCoordinatorMotorState__t_html_a18d3a3efa2a968e28468c8100d7f3dcf"><div class="ttname"><a href="../../d1/d11/structCoordinatorMotorState__t.html#a18d3a3efa2a968e28468c8100d7f3dcf">CoordinatorMotorState_t::priority</a></div><div class="ttdeci">MotorPriority_t priority</div><div class="ttdoc">Motor priority level.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00081">multi_motor_coordinator.h:81</a></div></div>
<div class="ttc" id="astructCoordinatorMotorState__t_html_a23ea550c61b9ea0e552c2fbdef23f5bb"><div class="ttname"><a href="../../d1/d11/structCoordinatorMotorState__t.html#a23ea550c61b9ea0e552c2fbdef23f5bb">CoordinatorMotorState_t::load_share_enabled</a></div><div class="ttdeci">bool load_share_enabled</div><div class="ttdoc">Motor participating in load sharing.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00080">multi_motor_coordinator.h:80</a></div></div>
<div class="ttc" id="astructCoordinatorMotorState__t_html_a28f3bc71634298e3394feaad796eb35f"><div class="ttname"><a href="../../d1/d11/structCoordinatorMotorState__t.html#a28f3bc71634298e3394feaad796eb35f">CoordinatorMotorState_t::current_position</a></div><div class="ttdeci">int32_t current_position</div><div class="ttdoc">Current motor position.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00082">multi_motor_coordinator.h:82</a></div></div>
<div class="ttc" id="astructCoordinatorMotorState__t_html_a2f7d710b49be1a25a7685c507e8b642b"><div class="ttname"><a href="../../d1/d11/structCoordinatorMotorState__t.html#a2f7d710b49be1a25a7685c507e8b642b">CoordinatorMotorState_t::motor_id</a></div><div class="ttdeci">uint8_t motor_id</div><div class="ttdoc">Motor identifier.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00077">multi_motor_coordinator.h:77</a></div></div>
<div class="ttc" id="astructCoordinatorMotorState__t_html_a78f7e450407131fcbda15a4b38e384d2"><div class="ttname"><a href="../../d1/d11/structCoordinatorMotorState__t.html#a78f7e450407131fcbda15a4b38e384d2">CoordinatorMotorState_t::profile_active</a></div><div class="ttdeci">bool profile_active</div><div class="ttdoc">Motion profile active.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00084">multi_motor_coordinator.h:84</a></div></div>
<div class="ttc" id="astructCoordinatorMotorState__t_html_a87a5dbb284b3f1fdb7cdbfa2204857ce"><div class="ttname"><a href="../../d1/d11/structCoordinatorMotorState__t.html#a87a5dbb284b3f1fdb7cdbfa2204857ce">CoordinatorMotorState_t::settled</a></div><div class="ttdeci">bool settled</div><div class="ttdoc">Motor position settled.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00083">multi_motor_coordinator.h:83</a></div></div>
<div class="ttc" id="astructCoordinatorMotorState__t_html_a9786f9bd6f95d6fb805e481bd0d43544"><div class="ttname"><a href="../../d1/d11/structCoordinatorMotorState__t.html#a9786f9bd6f95d6fb805e481bd0d43544">CoordinatorMotorState_t::slave_offset</a></div><div class="ttdeci">int32_t slave_offset</div><div class="ttdoc">Offset from master (master-slave mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00085">multi_motor_coordinator.h:85</a></div></div>
<div class="ttc" id="astructCoordinatorMotorState__t_html_a9e5b81836f2748ac26bea7e0568b8dc8"><div class="ttname"><a href="../../d1/d11/structCoordinatorMotorState__t.html#a9e5b81836f2748ac26bea7e0568b8dc8">CoordinatorMotorState_t::synchronized</a></div><div class="ttdeci">bool synchronized</div><div class="ttdoc">Motor participating in sync.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00079">multi_motor_coordinator.h:79</a></div></div>
<div class="ttc" id="astructCoordinatorMotorState__t_html_ae2f8b2644900b1b6685ea56dfda3062e"><div class="ttname"><a href="../../d1/d11/structCoordinatorMotorState__t.html#ae2f8b2644900b1b6685ea56dfda3062e">CoordinatorMotorState_t::enabled</a></div><div class="ttdeci">bool enabled</div><div class="ttdoc">Motor enabled in coordination.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00078">multi_motor_coordinator.h:78</a></div></div>
<div class="ttc" id="astructLoadSharingConfig__t_html"><div class="ttname"><a href="../../d2/dd6/structLoadSharingConfig__t.html">LoadSharingConfig_t</a></div><div class="ttdoc">Load sharing configuration structure.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00101">multi_motor_coordinator.h:101</a></div></div>
<div class="ttc" id="astructLoadSharingConfig__t_html_a0f22b4b653d364af1e563ed6c3232589"><div class="ttname"><a href="../../d2/dd6/structLoadSharingConfig__t.html#a0f22b4b653d364af1e563ed6c3232589">LoadSharingConfig_t::max_load_difference</a></div><div class="ttdeci">int32_t max_load_difference</div><div class="ttdoc">Maximum allowed load difference.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00104">multi_motor_coordinator.h:104</a></div></div>
<div class="ttc" id="astructLoadSharingConfig__t_html_a9d2a5e2085709372279a44a22ad1bd3d"><div class="ttname"><a href="../../d2/dd6/structLoadSharingConfig__t.html#a9d2a5e2085709372279a44a22ad1bd3d">LoadSharingConfig_t::load_threshold</a></div><div class="ttdeci">int32_t load_threshold</div><div class="ttdoc">Threshold to activate load balancing.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00103">multi_motor_coordinator.h:103</a></div></div>
<div class="ttc" id="astructLoadSharingConfig__t_html_acebd00045ffa71ff70dc47d20578927d"><div class="ttname"><a href="../../d2/dd6/structLoadSharingConfig__t.html#acebd00045ffa71ff70dc47d20578927d">LoadSharingConfig_t::load_balance_enabled</a></div><div class="ttdeci">bool load_balance_enabled</div><div class="ttdoc">Load balancing enabled.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00102">multi_motor_coordinator.h:102</a></div></div>
<div class="ttc" id="astructMotionProfile__t_html"><div class="ttname"><a href="../../d2/d2b/structMotionProfile__t.html">MotionProfile_t</a></div><div class="ttdoc">Motion profile structure.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/motion__profile_8h_source.html#l00059">motion_profile.h:59</a></div></div>
<div class="ttc" id="astructMotionProfile__t_html_a0bf74a2ba5789723138cfd1307b26110"><div class="ttname"><a href="../../d2/d2b/structMotionProfile__t.html#a0bf74a2ba5789723138cfd1307b26110">MotionProfile_t::direction</a></div><div class="ttdeci">int32_t direction</div><div class="ttdoc">Movement direction (+1 or -1)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/motion__profile_8h_source.html#l00066">motion_profile.h:66</a></div></div>
<div class="ttc" id="astructMotionProfile__t_html_a0c109fe169a7b3167fa315085838f4cd"><div class="ttname"><a href="../../d2/d2b/structMotionProfile__t.html#a0c109fe169a7b3167fa315085838f4cd">MotionProfile_t::end_position</a></div><div class="ttdeci">int32_t end_position</div><div class="ttdoc">Target position (steps)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/motion__profile_8h_source.html#l00065">motion_profile.h:65</a></div></div>
<div class="ttc" id="astructMotionProfile__t_html_a0d9b9c7918b38a0e4b14163563fbe0ce"><div class="ttname"><a href="../../d2/d2b/structMotionProfile__t.html#a0d9b9c7918b38a0e4b14163563fbe0ce">MotionProfile_t::acceleration</a></div><div class="ttdeci">uint32_t acceleration</div><div class="ttdoc">Acceleration (steps/sec²)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/motion__profile_8h_source.html#l00071">motion_profile.h:71</a></div></div>
<div class="ttc" id="astructMotionProfile__t_html_a20cef6f2059e8a500dd7b33b7bb55588"><div class="ttname"><a href="../../d2/d2b/structMotionProfile__t.html#a20cef6f2059e8a500dd7b33b7bb55588">MotionProfile_t::max_velocity</a></div><div class="ttdeci">uint32_t max_velocity</div><div class="ttdoc">Maximum velocity (steps/sec)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/motion__profile_8h_source.html#l00069">motion_profile.h:69</a></div></div>
<div class="ttc" id="astructMotionProfile__t_html_a64bf0b1749adc094fae6339d123e2b44"><div class="ttname"><a href="../../d2/d2b/structMotionProfile__t.html#a64bf0b1749adc094fae6339d123e2b44">MotionProfile_t::start_position</a></div><div class="ttdeci">int32_t start_position</div><div class="ttdoc">Starting position (steps)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/motion__profile_8h_source.html#l00064">motion_profile.h:64</a></div></div>
<div class="ttc" id="astructMotionProfile__t_html_ae142a86f682be8efaeb45026d80f8281"><div class="ttname"><a href="../../d2/d2b/structMotionProfile__t.html#ae142a86f682be8efaeb45026d80f8281">MotionProfile_t::type</a></div><div class="ttdeci">MotionProfileType_t type</div><div class="ttdoc">Profile type.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d07/motion__profile_8h_source.html#l00060">motion_profile.h:60</a></div></div>
<div class="ttc" id="astructMotorTarget__t_html_a7f97b7dc799a151c17a65567a5a619da"><div class="ttname"><a href="../../d0/d34/structMotorTarget__t.html#a7f97b7dc799a151c17a65567a5a619da">MotorTarget_t::enabled</a></div><div class="ttdeci">bool enabled</div><div class="ttdoc">Motor enabled for this move.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00056">multi_motor_coordinator.h:56</a></div></div>
<div class="ttc" id="astructMotorTarget__t_html_a9899f0d138d3a1863808e63c191ebfdc"><div class="ttname"><a href="../../d0/d34/structMotorTarget__t.html#a9899f0d138d3a1863808e63c191ebfdc">MotorTarget_t::max_velocity</a></div><div class="ttdeci">uint32_t max_velocity</div><div class="ttdoc">Maximum velocity for this move.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00058">multi_motor_coordinator.h:58</a></div></div>
<div class="ttc" id="astructMotorTarget__t_html_aee39283b5108bd4724e7fd78adf4777a"><div class="ttname"><a href="../../d0/d34/structMotorTarget__t.html#aee39283b5108bd4724e7fd78adf4777a">MotorTarget_t::acceleration</a></div><div class="ttdeci">uint32_t acceleration</div><div class="ttdoc">Acceleration for this move.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00059">multi_motor_coordinator.h:59</a></div></div>
<div class="ttc" id="astructMotorTarget__t_html_af54405fcefbc500fa303fb1dc46f9645"><div class="ttname"><a href="../../d0/d34/structMotorTarget__t.html#af54405fcefbc500fa303fb1dc46f9645">MotorTarget_t::target_position</a></div><div class="ttdeci">int32_t target_position</div><div class="ttdoc">Target position in steps.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00057">multi_motor_coordinator.h:57</a></div></div>
<div class="ttc" id="astructMultiMotorCoordinator__t_html"><div class="ttname"><a href="../../d7/d61/structMultiMotorCoordinator__t.html">MultiMotorCoordinator_t</a></div><div class="ttdoc">Multi-motor coordinator main structure.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00121">multi_motor_coordinator.h:121</a></div></div>
<div class="ttc" id="astructMultiMotorCoordinator__t_html_a049a8c35c9cf7ff5e1ffe5d91a26295a"><div class="ttname"><a href="../../d7/d61/structMultiMotorCoordinator__t.html#a049a8c35c9cf7ff5e1ffe5d91a26295a">MultiMotorCoordinator_t::current_move</a></div><div class="ttdeci">CoordinatedMoveCommand_t current_move</div><div class="ttdoc">Current move command.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00127">multi_motor_coordinator.h:127</a></div></div>
<div class="ttc" id="astructMultiMotorCoordinator__t_html_a2a22e347a66aec62040284f717819081"><div class="ttname"><a href="../../d7/d61/structMultiMotorCoordinator__t.html#a2a22e347a66aec62040284f717819081">MultiMotorCoordinator_t::sync_config</a></div><div class="ttdeci">SynchronizationConfig_t sync_config</div><div class="ttdoc">Synchronization configuration.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00124">multi_motor_coordinator.h:124</a></div></div>
<div class="ttc" id="astructMultiMotorCoordinator__t_html_a6fe2253c989b5ac3bc164a79bc8f1127"><div class="ttname"><a href="../../d7/d61/structMultiMotorCoordinator__t.html#a6fe2253c989b5ac3bc164a79bc8f1127">MultiMotorCoordinator_t::load_config</a></div><div class="ttdeci">LoadSharingConfig_t load_config</div><div class="ttdoc">Load sharing configuration.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00125">multi_motor_coordinator.h:125</a></div></div>
<div class="ttc" id="astructMultiMotorCoordinator__t_html_adb0796820a7b14433e5b4a94db90cab7"><div class="ttname"><a href="../../d7/d61/structMultiMotorCoordinator__t.html#adb0796820a7b14433e5b4a94db90cab7">MultiMotorCoordinator_t::motor_states</a></div><div class="ttdeci">CoordinatorMotorState_t motor_states[MAX_MOTORS]</div><div class="ttdoc">Individual motor states.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00123">multi_motor_coordinator.h:123</a></div></div>
<div class="ttc" id="astructMultiMotorCoordinator__t_html_adee724691d76092b8876f686066135b4"><div class="ttname"><a href="../../d7/d61/structMultiMotorCoordinator__t.html#adee724691d76092b8876f686066135b4">MultiMotorCoordinator_t::motion_state</a></div><div class="ttdeci">CoordinatedMotionState_t motion_state</div><div class="ttdoc">Motion state.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00126">multi_motor_coordinator.h:126</a></div></div>
<div class="ttc" id="astructPositionControlStatus__t_html"><div class="ttname"><a href="../../df/d9d/structPositionControlStatus__t.html">PositionControlStatus_t</a></div><div class="ttdoc">Position control status structure.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dba/position__control_8h_source.html#l00144">position_control.h:144</a></div></div>
<div class="ttc" id="astructPositionControlStatus__t_html_a61ac4c0eda402996490d78f4340357fc"><div class="ttname"><a href="../../df/d9d/structPositionControlStatus__t.html#a61ac4c0eda402996490d78f4340357fc">PositionControlStatus_t::position_settled</a></div><div class="ttdeci">bool position_settled</div><div class="ttdoc">Position settled flag.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dba/position__control_8h_source.html#l00153">position_control.h:153</a></div></div>
<div class="ttc" id="astructPositionControlStatus__t_html_a6c9e70952f6e39b019910d177a48d9fb"><div class="ttname"><a href="../../df/d9d/structPositionControlStatus__t.html#a6c9e70952f6e39b019910d177a48d9fb">PositionControlStatus_t::current_position</a></div><div class="ttdeci">int32_t current_position</div><div class="ttdoc">Current position.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dba/position__control_8h_source.html#l00147">position_control.h:147</a></div></div>
<div class="ttc" id="astructSynchronizationConfig__t_html"><div class="ttname"><a href="../../df/d1e/structSynchronizationConfig__t.html">SynchronizationConfig_t</a></div><div class="ttdoc">Synchronization configuration structure.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00091">multi_motor_coordinator.h:91</a></div></div>
<div class="ttc" id="astructSynchronizationConfig__t_html_a37e5b88528700dfe5ce48bd10db14f41"><div class="ttname"><a href="../../df/d1e/structSynchronizationConfig__t.html#a37e5b88528700dfe5ce48bd10db14f41">SynchronizationConfig_t::sync_tolerance</a></div><div class="ttdeci">int32_t sync_tolerance</div><div class="ttdoc">Synchronization tolerance in steps.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00093">multi_motor_coordinator.h:93</a></div></div>
<div class="ttc" id="astructSynchronizationConfig__t_html_ab36c9cee977c57e234390cc38be2448d"><div class="ttname"><a href="../../df/d1e/structSynchronizationConfig__t.html#ab36c9cee977c57e234390cc38be2448d">SynchronizationConfig_t::max_sync_wait_ms</a></div><div class="ttdeci">uint32_t max_sync_wait_ms</div><div class="ttdoc">Maximum wait time for sync.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00094">multi_motor_coordinator.h:94</a></div></div>
<div class="ttc" id="astructSynchronizationConfig__t_html_ae448f3653a120cefc18e9bc671296577"><div class="ttname"><a href="../../df/d1e/structSynchronizationConfig__t.html#ae448f3653a120cefc18e9bc671296577">SynchronizationConfig_t::sync_master</a></div><div class="ttdeci">uint8_t sync_master</div><div class="ttdoc">Master motor for synchronization.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1f/multi__motor__coordinator_8h_source.html#l00092">multi_motor_coordinator.h:92</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 11 2025 23:51:09 for STM32H753ZI Motor Control System by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
